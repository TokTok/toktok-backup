{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "https://github.com/TokTok/c-toxcore/blob/172f279dc0647a538b30e62c96bab8bb1b0c8960/toxcore/onion_client.c#L2058\r\n\r\nhttps://github.com/TokTok/c-toxcore/blob/172f279dc0647a538b30e62c96bab8bb1b0c8960/toxcore/DHT.c#L3040-L3044\r\n\r\nhttps://github.com/TokTok/c-toxcore/blob/172f279dc0647a538b30e62c96bab8bb1b0c8960/toxcore/onion_client.c#L2021-L2022\r\n\r\nhttps://github.com/TokTok/c-toxcore/blob/172f279dc0647a538b30e62c96bab8bb1b0c8960/toxcore/Messenger.c#L2475-L2481\r\n\r\n<br>\r\n\r\nthis goes directly into the self connection status.\r\n\r\nyou can never reach self UDP connection status.\r\nbut friends will get UDP connection status.",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "https://github.com/TokTok/c-toxcore/blob/172f279dc0647a538b30e62c96bab8bb1b0c8960/toxcore/DHT.c#L2942\r\n\r\nalso because of this line we would bootstrap endlessly when only connected to LAN nodes?",
            "created_at": "2023-07-07T11:51:47Z",
            "html_url": "https://github.com/TokTok/c-toxcore/issues/2386#issuecomment-1625298251",
            "id": 1625298251,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/2386",
            "node_id": "IC_kwDOA7zIGs5g4BVL",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/1625298251/reactions"
            },
            "updated_at": "2023-07-07T11:51:47Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/1625298251",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6833516?v=4",
                "events_url": "https://api.github.com/users/zoff99/events{/privacy}",
                "followers_url": "https://api.github.com/users/zoff99/followers",
                "following_url": "https://api.github.com/users/zoff99/following{/other_user}",
                "gists_url": "https://api.github.com/users/zoff99/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zoff99",
                "id": 6833516,
                "login": "zoff99",
                "node_id": "MDQ6VXNlcjY4MzM1MTY=",
                "organizations_url": "https://api.github.com/users/zoff99/orgs",
                "received_events_url": "https://api.github.com/users/zoff99/received_events",
                "repos_url": "https://api.github.com/users/zoff99/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zoff99/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zoff99/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zoff99",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "some one already changed it here for some reason:\r\n\r\nhttps://github.com/TokTok/c-toxcore/blob/172f279dc0647a538b30e62c96bab8bb1b0c8960/toxcore/onion_client.c#L323-L324\r\n\r\n`Use TCP paths when UDP is not connected. Made some code depend less on the UDP only DHT.`\r\nhttps://github.com/TokTok/c-toxcore/commit/450ad2dd34072acf1a44192576c89b1373edf1f9",
            "created_at": "2023-07-07T11:54:02Z",
            "html_url": "https://github.com/TokTok/c-toxcore/issues/2386#issuecomment-1625300837",
            "id": 1625300837,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/2386",
            "node_id": "IC_kwDOA7zIGs5g4B9l",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/1625300837/reactions"
            },
            "updated_at": "2023-07-07T11:55:59Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/1625300837",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6833516?v=4",
                "events_url": "https://api.github.com/users/zoff99/events{/privacy}",
                "followers_url": "https://api.github.com/users/zoff99/followers",
                "following_url": "https://api.github.com/users/zoff99/following{/other_user}",
                "gists_url": "https://api.github.com/users/zoff99/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zoff99",
                "id": 6833516,
                "login": "zoff99",
                "node_id": "MDQ6VXNlcjY4MzM1MTY=",
                "organizations_url": "https://api.github.com/users/zoff99/orgs",
                "received_events_url": "https://api.github.com/users/zoff99/received_events",
                "repos_url": "https://api.github.com/users/zoff99/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zoff99/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zoff99/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zoff99",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": ">you can never reach self UDP connection status.\r\n>but friends will get UDP connection status.\r\n\r\nThe connection status of this instance and the connection status of friends mean different things, which is mentioned in the API documentation, so this case is not surprising:\r\n\r\nhttps://github.com/TokTok/c-toxcore/blob/172f279dc0647a538b30e62c96bab8bb1b0c8960/toxcore/tox.h#L1021-L1029\r\n\r\nLooking at the code bits you quoted, it looks like Tox (via the Onion module) considers the case when DHT is connected only to LAN nodes, or no nodes at all, as Tox not being connected to the DHT via UDP. To rephrase this, Tox is connected via UDP only if its DHT is connected to a non-LAN, i.e. Internet, node. This is not a bad assumption in the context of trying to connect to the greater DHT that is on the Internet, as perhaps the router NAT is preventing you from establishing UDP connections with Internet nodes, which is why you are only able to connect to LAN nodes. It's reasonable to say that you are not connected to the DHT via UDP in this case. However, if your intent was never to connect to the Internet DHT, if it was to use Tox on LAN instead, then yes, reporting that DHT is not UDP-connected is misleading. It is not UDP-connected to Internet nodes, but is UDP-connected to LAN nodes. I wonder if we need an extra flag in the connection status to indicate LAN/non-LAN connection status? Or at the very least we could clarify the documentation to say something like \"A UDP connection to a non-LAN Internet node has been established.\".\r\n\r\n>also because of this line we would bootstrap endlessly when only connected to LAN nodes?\r\n\r\nAgain, if your intent is to connect to the Internet DHT nodes, then there is nothing wrong with such behavior. But if you intend to use Tox only for LAN, then you wouldn't want this behavior, as you pointed out. I guess Tox wasn't designed with LAN-only use-case in mind.",
            "created_at": "2023-07-12T10:50:13Z",
            "html_url": "https://github.com/TokTok/c-toxcore/issues/2386#issuecomment-1632280075",
            "id": 1632280075,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/2386",
            "node_id": "IC_kwDOA7zIGs5hSp4L",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/1632280075/reactions"
            },
            "updated_at": "2023-07-12T11:00:32Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/1632280075",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1855294?v=4",
                "events_url": "https://api.github.com/users/nurupo/events{/privacy}",
                "followers_url": "https://api.github.com/users/nurupo/followers",
                "following_url": "https://api.github.com/users/nurupo/following{/other_user}",
                "gists_url": "https://api.github.com/users/nurupo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/nurupo",
                "id": 1855294,
                "login": "nurupo",
                "node_id": "MDQ6VXNlcjE4NTUyOTQ=",
                "organizations_url": "https://api.github.com/users/nurupo/orgs",
                "received_events_url": "https://api.github.com/users/nurupo/received_events",
                "repos_url": "https://api.github.com/users/nurupo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/nurupo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/nurupo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/nurupo",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/2386/comments",
    "created_at": "2023-07-07T07:08:56Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6833516?v=4",
                "events_url": "https://api.github.com/users/zoff99/events{/privacy}",
                "followers_url": "https://api.github.com/users/zoff99/followers",
                "following_url": "https://api.github.com/users/zoff99/following{/other_user}",
                "gists_url": "https://api.github.com/users/zoff99/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zoff99",
                "id": 6833516,
                "login": "zoff99",
                "node_id": "MDQ6VXNlcjY4MzM1MTY=",
                "organizations_url": "https://api.github.com/users/zoff99/orgs",
                "received_events_url": "https://api.github.com/users/zoff99/received_events",
                "repos_url": "https://api.github.com/users/zoff99/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zoff99/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zoff99/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zoff99",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2023-07-07T07:10:35Z",
            "event": "labeled",
            "id": 9751426022,
            "label": {
                "color": "ee0701",
                "name": "bug"
            },
            "node_id": "LE_lADOA7zIGs5q3hWfzwAAAAJFOvPm",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/events/9751426022"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2023-11-13T15:38:24Z",
            "event": "milestoned",
            "id": 10943400827,
            "milestone": {
                "title": "v0.2.x"
            },
            "node_id": "MIE_lADOA7zIGs5q3hWfzwAAAAKMRwt7",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/events/10943400827"
        }
    ],
    "events_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/2386/events",
    "html_url": "https://github.com/TokTok/c-toxcore/issues/2386",
    "id": 1792939423,
    "labels": [
        {
            "color": "ee0701",
            "default": true,
            "description": "Bug fix for the user, not a fix to a build script",
            "id": 403702216,
            "name": "bug",
            "node_id": "MDU6TGFiZWw0MDM3MDIyMTY=",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/2386/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 0,
        "created_at": "2018-03-09T13:13:48Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
            "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
            "followers_url": "https://api.github.com/users/iphydf/followers",
            "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
            "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/iphydf",
            "id": 10647936,
            "login": "iphydf",
            "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
            "organizations_url": "https://api.github.com/users/iphydf/orgs",
            "received_events_url": "https://api.github.com/users/iphydf/received_events",
            "repos_url": "https://api.github.com/users/iphydf/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/iphydf",
            "user_view_type": "public"
        },
        "description": "Placeholder for the next 0.2.x version.",
        "due_on": null,
        "html_url": "https://github.com/TokTok/c-toxcore/milestone/28",
        "id": 3174131,
        "labels_url": "https://api.github.com/repos/TokTok/c-toxcore/milestones/28/labels",
        "node_id": "MDk6TWlsZXN0b25lMzE3NDEzMQ==",
        "number": 28,
        "open_issues": 160,
        "state": "open",
        "title": "v0.2.x",
        "updated_at": "2025-01-14T12:48:29Z",
        "url": "https://api.github.com/repos/TokTok/c-toxcore/milestones/28"
    },
    "node_id": "I_kwDOA7zIGs5q3hWf",
    "number": 2386,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 1,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/2386/reactions"
    },
    "repository_url": "https://api.github.com/repos/TokTok/c-toxcore",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/2386/timeline",
    "title": "bug in the onion code, with local LAN you can never get self UDP connection status",
    "updated_at": "2023-11-13T15:38:24Z",
    "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/2386",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/6833516?v=4",
        "events_url": "https://api.github.com/users/zoff99/events{/privacy}",
        "followers_url": "https://api.github.com/users/zoff99/followers",
        "following_url": "https://api.github.com/users/zoff99/following{/other_user}",
        "gists_url": "https://api.github.com/users/zoff99/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/zoff99",
        "id": 6833516,
        "login": "zoff99",
        "node_id": "MDQ6VXNlcjY4MzM1MTY=",
        "organizations_url": "https://api.github.com/users/zoff99/orgs",
        "received_events_url": "https://api.github.com/users/zoff99/received_events",
        "repos_url": "https://api.github.com/users/zoff99/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/zoff99/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zoff99/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/zoff99",
        "user_view_type": "public"
    }
}