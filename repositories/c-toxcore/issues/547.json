{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "The Tox onion network suffers from the same problem described here\r\n    https://www.torproject.org/docs/faq#EntryGuards ;\r\nI suggest we adopt the same partial solution.\r\n\r\nIf an attacker controls \\epsilon of the nodes, \\epsilon^2 of randomly\r\ngenerated paths will start and end with the attacker, and then it's easy for\r\nthe attacker to watch timings (delaying and/or dropping packets for extra\r\ninformation) and correlate the sender with the destination. In particular this\r\napplies to announcements, meaning the attacker gets to match a long-term key\r\nto the IP address of its owner. This is made worse by the fact that an\r\nattacker wanting to deanonymise a particular long-term key can deliberately\r\nplace themself in the DHT at that key and be sure to get announcements for\r\nthat key.\r\n\r\nAs in the case of Tor, I don't see that we can really hope to prevent this\r\nkind of attack. So I suggest we adopt their form of mitigation for it -\r\nhaving each node pick randomly a few \"guard nodes\" and then consistently use\r\nthem for the first node of an onion path, replacing them only when they go\r\ndown. Theoretically, if each user uses g guard nodes and never changes them,\r\nour attacker will only be able to deanonymise the g\\epsilon nodes which\r\nconnect to the attacker nodes, whereas without guard nodes the attacker can\r\neventually deanonymise the entire network (and hence obtain the complete\r\nfriend graph).\r\n\r\nTo prevent targetted attacks, it's important that the guard nodes chosen by a\r\nnode are not predictable even by one knowing the node's long-term key or those\r\nof its friends.\r\n\r\nI suggest the following implementation (and will probably start working on it \r\nif no-one thinks it's a bad idea). We maintain a list of guard nodes populated\r\nexclusively from DHT \"fake friends\", and select from it randomly for the first\r\nnode (and only the first node) when constructing onion paths. If three onion\r\npaths using the same guard node consecutively time out without any successes,\r\nthe guard node is deleted from the list and replaced by one from a DHT fake \r\nfriend. We keep track of deleted guard nodes and don't use them again; if all\r\nthe available nodes are deleted guard nodes, we replace a fake friend with a\r\nnew one. Preferably, the guard node list would be saved.\r\n",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "There's a problem with this way of deciding when to ditch a guard node. If an\r\nattacker occupies your announce neighbourhood and drops every announce packet\r\nyou send to them, you'll end up blaming the guard nodes and deleting them. So\r\nthe attacker can keep doing this until you happen to switch to using a node\r\nthey control as a guard node.\r\n\r\nThe only way I see to deal with this is the following scheme: when a guard\r\nnode appears to be failing, before deleting it, use it (i.e. use some onion\r\nroute in which it is the first node) to send an onion request to yourself. As\r\nlong as the other nodes in onion routes are chosen unpredictably, an attacker\r\nhas no way to cause this test to fail.\r\n\r\n(Currently nodes in onion routes *are* chosen rather predictably, which is a\r\nproblem for a number reasons. But that's a side-issue.)\r\n",
            "created_at": "2017-05-16T18:04:29Z",
            "html_url": "https://github.com/TokTok/c-toxcore/issues/547#issuecomment-301865407",
            "id": 301865407,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/547",
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwMTg2NTQwNw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/301865407/reactions"
            },
            "updated_at": "2017-05-16T18:04:29Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/301865407",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/590069?v=4",
                "events_url": "https://api.github.com/users/zugz/events{/privacy}",
                "followers_url": "https://api.github.com/users/zugz/followers",
                "following_url": "https://api.github.com/users/zugz/following{/other_user}",
                "gists_url": "https://api.github.com/users/zugz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zugz",
                "id": 590069,
                "login": "zugz",
                "node_id": "MDQ6VXNlcjU5MDA2OQ==",
                "organizations_url": "https://api.github.com/users/zugz/orgs",
                "received_events_url": "https://api.github.com/users/zugz/received_events",
                "repos_url": "https://api.github.com/users/zugz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zugz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zugz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zugz",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/547/comments",
    "created_at": "2017-05-14T18:15:05Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2018-07-16T21:04:04Z",
            "event": "milestoned",
            "id": 1736261766,
            "milestone": {
                "title": "v0.2.x"
            },
            "node_id": "MDE1Ok1pbGVzdG9uZWRFdmVudDE3MzYyNjE3NjY=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/events/1736261766"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2020-04-27T23:47:07Z",
            "event": "labeled",
            "id": 3278016580,
            "label": {
                "color": "eeeeee",
                "name": "P3"
            },
            "node_id": "MDEyOkxhYmVsZWRFdmVudDMyNzgwMTY1ODA=",
            "performed_via_github_app": null,
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/events/3278016580"
        }
    ],
    "events_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/547/events",
    "html_url": "https://github.com/TokTok/c-toxcore/issues/547",
    "id": 228558885,
    "labels": [
        {
            "color": "eeeeee",
            "default": false,
            "description": "Low priority",
            "id": 406490432,
            "name": "P3",
            "node_id": "MDU6TGFiZWw0MDY0OTA0MzI=",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/labels/P3"
        }
    ],
    "labels_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/547/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 0,
        "created_at": "2018-03-09T13:13:48Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
            "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
            "followers_url": "https://api.github.com/users/iphydf/followers",
            "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
            "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/iphydf",
            "id": 10647936,
            "login": "iphydf",
            "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
            "organizations_url": "https://api.github.com/users/iphydf/orgs",
            "received_events_url": "https://api.github.com/users/iphydf/received_events",
            "repos_url": "https://api.github.com/users/iphydf/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/iphydf",
            "user_view_type": "public"
        },
        "description": "Placeholder for the next 0.2.x version.",
        "due_on": null,
        "html_url": "https://github.com/TokTok/c-toxcore/milestone/28",
        "id": 3174131,
        "labels_url": "https://api.github.com/repos/TokTok/c-toxcore/milestones/28/labels",
        "node_id": "MDk6TWlsZXN0b25lMzE3NDEzMQ==",
        "number": 28,
        "open_issues": 160,
        "state": "open",
        "title": "v0.2.x",
        "updated_at": "2025-01-14T12:48:29Z",
        "url": "https://api.github.com/repos/TokTok/c-toxcore/milestones/28"
    },
    "node_id": "MDU6SXNzdWUyMjg1NTg4ODU=",
    "number": 547,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 3,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 3,
        "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/547/reactions"
    },
    "repository_url": "https://api.github.com/repos/TokTok/c-toxcore",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/547/timeline",
    "title": "Use guard nodes",
    "updated_at": "2020-04-27T23:47:07Z",
    "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/547",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/590069?v=4",
        "events_url": "https://api.github.com/users/zugz/events{/privacy}",
        "followers_url": "https://api.github.com/users/zugz/followers",
        "following_url": "https://api.github.com/users/zugz/following{/other_user}",
        "gists_url": "https://api.github.com/users/zugz/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/zugz",
        "id": 590069,
        "login": "zugz",
        "node_id": "MDQ6VXNlcjU5MDA2OQ==",
        "organizations_url": "https://api.github.com/users/zugz/orgs",
        "received_events_url": "https://api.github.com/users/zugz/received_events",
        "repos_url": "https://api.github.com/users/zugz/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/zugz/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zugz/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/zugz",
        "user_view_type": "public"
    }
}