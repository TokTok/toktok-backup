{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/TokTok/c-toxcore/issues/2078/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/TokTok/c-toxcore/pulls/2078/commits"
        },
        "html": {
            "href": "https://github.com/TokTok/c-toxcore/pull/2078"
        },
        "issue": {
            "href": "https://api.github.com/repos/TokTok/c-toxcore/issues/2078"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/TokTok/c-toxcore/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/TokTok/c-toxcore/pulls/2078/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/TokTok/c-toxcore/pulls/2078"
        },
        "statuses": {
            "href": "https://api.github.com/repos/TokTok/c-toxcore/statuses/0dca481e1daa32a2fcccb0a2f86ccc841a7b32b1"
        }
    },
    "active_lock_reason": null,
    "additions": 142,
    "assignee": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1646057?v=4",
        "events_url": "https://api.github.com/users/JFreegman/events{/privacy}",
        "followers_url": "https://api.github.com/users/JFreegman/followers",
        "following_url": "https://api.github.com/users/JFreegman/following{/other_user}",
        "gists_url": "https://api.github.com/users/JFreegman/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/JFreegman",
        "id": 1646057,
        "login": "JFreegman",
        "node_id": "MDQ6VXNlcjE2NDYwNTc=",
        "organizations_url": "https://api.github.com/users/JFreegman/orgs",
        "received_events_url": "https://api.github.com/users/JFreegman/received_events",
        "repos_url": "https://api.github.com/users/JFreegman/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/JFreegman/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/JFreegman/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/JFreegman",
        "user_view_type": "public"
    },
    "assignees": [
        {
            "avatar_url": "https://avatars.githubusercontent.com/u/1646057?v=4",
            "events_url": "https://api.github.com/users/JFreegman/events{/privacy}",
            "followers_url": "https://api.github.com/users/JFreegman/followers",
            "following_url": "https://api.github.com/users/JFreegman/following{/other_user}",
            "gists_url": "https://api.github.com/users/JFreegman/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/JFreegman",
            "id": 1646057,
            "login": "JFreegman",
            "node_id": "MDQ6VXNlcjE2NDYwNTc=",
            "organizations_url": "https://api.github.com/users/JFreegman/orgs",
            "received_events_url": "https://api.github.com/users/JFreegman/received_events",
            "repos_url": "https://api.github.com/users/JFreegman/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/JFreegman/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/JFreegman/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/JFreegman",
            "user_view_type": "public"
        }
    ],
    "author_association": "MEMBER",
    "auto_merge": null,
    "base": {
        "label": "TokTok:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/TokTok/c-toxcore/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/TokTok/c-toxcore/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/TokTok/c-toxcore/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/TokTok/c-toxcore/branches{/branch}",
            "clone_url": "https://github.com/TokTok/c-toxcore.git",
            "collaborators_url": "https://api.github.com/repos/TokTok/c-toxcore/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/TokTok/c-toxcore/comments{/number}",
            "commits_url": "https://api.github.com/repos/TokTok/c-toxcore/commits{/sha}",
            "compare_url": "https://api.github.com/repos/TokTok/c-toxcore/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/TokTok/c-toxcore/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/TokTok/c-toxcore/contributors",
            "created_at": "2016-07-06T08:15:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/TokTok/c-toxcore/deployments",
            "description": "The future of online communications.",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/TokTok/c-toxcore/downloads",
            "events_url": "https://api.github.com/repos/TokTok/c-toxcore/events",
            "fork": true,
            "forks": 292,
            "forks_count": 292,
            "forks_url": "https://api.github.com/repos/TokTok/c-toxcore/forks",
            "full_name": "TokTok/c-toxcore",
            "git_commits_url": "https://api.github.com/repos/TokTok/c-toxcore/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/TokTok/c-toxcore/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/TokTok/c-toxcore/git/tags{/sha}",
            "git_url": "git://github.com/TokTok/c-toxcore.git",
            "has_discussions": false,
            "has_downloads": false,
            "has_issues": true,
            "has_pages": false,
            "has_projects": false,
            "has_wiki": false,
            "homepage": "https://tox.chat",
            "hooks_url": "https://api.github.com/repos/TokTok/c-toxcore/hooks",
            "html_url": "https://github.com/TokTok/c-toxcore",
            "id": 62703642,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/TokTok/c-toxcore/issues{/number}",
            "keys_url": "https://api.github.com/repos/TokTok/c-toxcore/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/TokTok/c-toxcore/labels{/name}",
            "language": "C",
            "languages_url": "https://api.github.com/repos/TokTok/c-toxcore/languages",
            "license": {
                "key": "gpl-3.0",
                "name": "GNU General Public License v3.0",
                "node_id": "MDc6TGljZW5zZTk=",
                "spdx_id": "GPL-3.0",
                "url": "https://api.github.com/licenses/gpl-3.0"
            },
            "merges_url": "https://api.github.com/repos/TokTok/c-toxcore/merges",
            "milestones_url": "https://api.github.com/repos/TokTok/c-toxcore/milestones{/number}",
            "mirror_url": null,
            "name": "c-toxcore",
            "node_id": "MDEwOlJlcG9zaXRvcnk2MjcwMzY0Mg==",
            "notifications_url": "https://api.github.com/repos/TokTok/c-toxcore/notifications{?since,all,participating}",
            "open_issues": 210,
            "open_issues_count": 210,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/17427091?v=4",
                "events_url": "https://api.github.com/users/TokTok/events{/privacy}",
                "followers_url": "https://api.github.com/users/TokTok/followers",
                "following_url": "https://api.github.com/users/TokTok/following{/other_user}",
                "gists_url": "https://api.github.com/users/TokTok/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/TokTok",
                "id": 17427091,
                "login": "TokTok",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjE3NDI3MDkx",
                "organizations_url": "https://api.github.com/users/TokTok/orgs",
                "received_events_url": "https://api.github.com/users/TokTok/received_events",
                "repos_url": "https://api.github.com/users/TokTok/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/TokTok/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/TokTok/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/TokTok",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/TokTok/c-toxcore/pulls{/number}",
            "pushed_at": "2025-01-24T18:18:40Z",
            "releases_url": "https://api.github.com/repos/TokTok/c-toxcore/releases{/id}",
            "size": 25245,
            "ssh_url": "git@github.com:TokTok/c-toxcore.git",
            "stargazers_count": 2329,
            "stargazers_url": "https://api.github.com/repos/TokTok/c-toxcore/stargazers",
            "statuses_url": "https://api.github.com/repos/TokTok/c-toxcore/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/TokTok/c-toxcore/subscribers",
            "subscription_url": "https://api.github.com/repos/TokTok/c-toxcore/subscription",
            "svn_url": "https://github.com/TokTok/c-toxcore",
            "tags_url": "https://api.github.com/repos/TokTok/c-toxcore/tags",
            "teams_url": "https://api.github.com/repos/TokTok/c-toxcore/teams",
            "topics": [
                "cryptography",
                "encryption",
                "network",
                "p2p",
                "security",
                "toxcore"
            ],
            "trees_url": "https://api.github.com/repos/TokTok/c-toxcore/git/trees{/sha}",
            "updated_at": "2025-01-24T22:05:30Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore",
            "visibility": "public",
            "watchers": 2329,
            "watchers_count": 2329,
            "web_commit_signoff_required": false
        },
        "sha": "6c2014d7195aaf89dd82e10bad6d65ffef0996aa",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/17427091?v=4",
            "events_url": "https://api.github.com/users/TokTok/events{/privacy}",
            "followers_url": "https://api.github.com/users/TokTok/followers",
            "following_url": "https://api.github.com/users/TokTok/following{/other_user}",
            "gists_url": "https://api.github.com/users/TokTok/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/TokTok",
            "id": 17427091,
            "login": "TokTok",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjE3NDI3MDkx",
            "organizations_url": "https://api.github.com/users/TokTok/orgs",
            "received_events_url": "https://api.github.com/users/TokTok/received_events",
            "repos_url": "https://api.github.com/users/TokTok/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/TokTok/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TokTok/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/TokTok",
            "user_view_type": "public"
        }
    },
    "body": "This PR simplifies the logic determining how often we\r\nsend announce request packets to offline peers and how often\r\nwe attempt to re-populate our nodes lists. It also removes\r\nsome randomness from packet sending that was intended to \r\nreduce network traffic but greatly increased the code complexity\r\nand didn't really do all that much to help.\r\n\r\nWe now aggressively search the DHT for offline friends when we first\r\nbootstrap, add a new friend, or when a friend goes offline, and \r\nexponentially increase the lookup interval based on how many\r\nsuccessful lookup requests we've already made, with a max\r\ninterval of 60 minutes per node, per friend (with 8 max nodes).\r\nRequests are also now spaced evenly apart for each node\r\nwhich guarantees at least one lookup per friend, per n seconds, \r\nwhere n depends on the current timeout.\r\n\r\nWe also no longer spam node requests whenever our list of living\r\nnodes drops below the maximum. Instead, we repopulate the nodes\r\nlist only when it drops to or below half the maximum, or after\r\na 10 minute timeout.\r\n\r\nI ran two identical tox instances simultaneously for 10+ hours using \r\nthe netprof branch, and found that these changes reduced total tox\r\nnetwork traffic by between 30% and 50% (there is some randomness \r\nbased  on the amount of in-traffic you get). Results are below (click \r\nlinks for full results):\r\n\r\n[Current master with UDP enabled](https://gist.github.com/JFreegman/5a7af2a61984d190c2dea93e5bab3bf7):\r\n```\r\nRun time: 40341 seconds\r\nAverage kilobytes per second: 7.69\r\nAverage packets per second: 38\r\nAverage packet size: 201 bytes\r\n\r\nTotal bytes:            310048540\r\nTotal bytes sent:       186386371 (60.12%)\r\nTotal bytes recv:       123662169 (39.88%)\r\n```\r\n\r\n[This branch with UDP enabled](https://gist.github.com/JFreegman/27be0c61c94373bcf8ee52fb774e8844#file-gistfile1-txt-L11):\r\n```\r\n--- Tox network profile log dump ---\r\nRun time: 40401 seconds\r\nAverage kilobytes per second: 3.90\r\nAverage packets per second: 27\r\nAverage packet size: 142 bytes\r\n\r\nTotal bytes:            157547766\r\nTotal bytes sent:       104530935 (66.35%)\r\nTotal bytes recv:       53016831 (33.65%)\r\n```\r\n\r\n[Current master with UDP disabled](https://gist.github.com/JFreegman/7de1626735359b840bf0143feba580f8):\r\n```\r\nRun time: 48829 seconds\r\nAverage kilobytes per second: 0.99\r\nAverage packets per second: 5\r\nAverage packet size: 184 bytes\r\n\r\nTotal bytes:            48251725\r\nTotal bytes sent:       37546683 (77.81%)\r\nTotal bytes recv:       10705042 (22.19%)\r\n```\r\n\r\n[This branch with UDP disabled](https://gist.github.com/JFreegman/2547e80de9047e12fb23bbc537d62721):\r\n```\r\nRun time: 48843 seconds\r\nAverage kilobytes per second: 0.47\r\nAverage packets per second: 3\r\nAverage packet size: 124 bytes\r\n\r\nTotal bytes:            23143619\r\nTotal bytes sent:       17819044 (76.99%)\r\nTotal bytes recv:       5324575 (23.01%)\r\n```\r\n<!-- Reviewable:start -->\r\n---\r\nThis change is [<img src=\"https://reviewable.io/review_button.svg\" height=\"34\" align=\"absmiddle\" alt=\"Reviewable\"/>](https://reviewable.io/reviews/toktok/c-toxcore/2078)\r\n<!-- Reviewable:end -->\r\n",
    "changed_files": 1,
    "closed_at": "2022-03-03T16:02:37Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/TokTok/c-toxcore/pull/2078#discussion_r814394136"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/TokTok/c-toxcore/pulls/2078"
                },
                "self": {
                    "href": "https://api.github.com/repos/TokTok/c-toxcore/pulls/comments/814394136"
                }
            },
            "author_association": "MEMBER",
            "body": "The exponent is always an integer. You can use `1 << exponent` instead of `pow`.",
            "commit_id": "0dca481e1daa32a2fcccb0a2f86ccc841a7b32b1",
            "created_at": "2022-02-25T00:55:55Z",
            "diff_hunk": "@@ -1555,117 +1567,123 @@ static void do_friend(Onion_Client *onion_c, uint16_t friendnum)\n         return;\n     }\n \n-    if (!onion_c->friends_list[friendnum].is_valid) {\n+    Onion_Friend *o_friend = &onion_c->friends_list[friendnum];\n+\n+    if (!o_friend->is_valid) {\n         return;\n     }\n \n-    unsigned int interval = ANNOUNCE_FRIEND;\n+    uint32_t interval;\n+    const uint64_t tm = mono_time_get(onion_c->mono_time);\n+    const bool friend_is_new = o_friend->run_count <= ANNOUNCE_FRIEND_RUN_COUNT_BEGINNING;\n \n-    if (onion_c->friends_list[friendnum].run_count < RUN_COUNT_FRIEND_ANNOUNCE_BEGINNING) {\n-        interval = ANNOUNCE_FRIEND_BEGINNING;\n-    } else {\n-        if (onion_c->friends_list[friendnum].last_seen == 0) {\n-            onion_c->friends_list[friendnum].last_seen = mono_time_get(onion_c->mono_time);\n+    if (!friend_is_new) {\n+        if (o_friend->last_seen == 0) {\n+            o_friend->last_seen = tm;\n         }\n \n-        uint64_t backoff_interval = (mono_time_get(onion_c->mono_time) -\n-                                     onion_c->friends_list[friendnum].last_seen)\n-                                    / ONION_FRIEND_BACKOFF_FACTOR;\n+        // how often we ping a node for a friend depends on how many times we've already tried.\n+        // the interval increases exponentially, as the longer a friend has been offline, the less\n+        // likely the case is that they're online and failed to find us\n+        const double c = pow(2.0, min_u16(MAX_RUN_COUNT_EXPONENT, (double)(o_friend->run_count - 2)));",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/2078#discussion_r814394136",
            "id": 814394136,
            "line": null,
            "node_id": "PRRC_kwDOA7zIGs4wiqsY",
            "original_commit_id": "faae422f424e1dc6ed39024f62b2680d27fd230e",
            "original_line": 1588,
            "original_position": 144,
            "original_start_line": null,
            "path": "toxcore/onion_client.c",
            "position": null,
            "pull_request_review_id": 893165422,
            "pull_request_url": "https://api.github.com/repos/TokTok/c-toxcore/pulls/2078",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/pulls/comments/814394136/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2022-02-25T00:56:01Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/pulls/comments/814394136",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/TokTok/c-toxcore/pull/2078#discussion_r818775863"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/TokTok/c-toxcore/pulls/2078"
                },
                "self": {
                    "href": "https://api.github.com/repos/TokTok/c-toxcore/pulls/comments/818775863"
                }
            },
            "author_association": "MEMBER",
            "body": "`node_list` to avoid shadowing the `list_nodes` function.",
            "commit_id": "0dca481e1daa32a2fcccb0a2f86ccc841a7b32b1",
            "created_at": "2022-03-03T15:33:48Z",
            "diff_hunk": "@@ -1555,112 +1566,119 @@ static void do_friend(Onion_Client *onion_c, uint16_t friendnum)\n         return;\n     }\n \n-    if (!onion_c->friends_list[friendnum].is_valid) {\n+    Onion_Friend *o_friend = &onion_c->friends_list[friendnum];\n+\n+    if (!o_friend->is_valid) {\n         return;\n     }\n \n-    unsigned int interval = ANNOUNCE_FRIEND;\n+    uint32_t interval;\n+    const uint64_t tm = mono_time_get(onion_c->mono_time);\n+    const bool friend_is_new = o_friend->run_count <= ANNOUNCE_FRIEND_RUN_COUNT_BEGINNING;\n \n-    if (onion_c->friends_list[friendnum].run_count < RUN_COUNT_FRIEND_ANNOUNCE_BEGINNING) {\n-        interval = ANNOUNCE_FRIEND_BEGINNING;\n-    } else {\n-        if (onion_c->friends_list[friendnum].last_seen == 0) {\n-            onion_c->friends_list[friendnum].last_seen = mono_time_get(onion_c->mono_time);\n+    if (!friend_is_new) {\n+        if (o_friend->last_seen == 0) {\n+            o_friend->last_seen = tm;\n         }\n \n-        uint64_t backoff_interval = (mono_time_get(onion_c->mono_time) -\n-                                     onion_c->friends_list[friendnum].last_seen)\n-                                    / ONION_FRIEND_BACKOFF_FACTOR;\n+        // how often we ping a node for a friend depends on how many times we've already tried.\n+        // the interval increases exponentially, as the longer a friend has been offline, the less\n+        // likely the case is that they're online and failed to find us\n+        const uint32_t c = 1 << min_u32(MAX_RUN_COUNT_EXPONENT, o_friend->run_count - 2);\n+        interval = min_u32(c, ANNOUNCE_FRIEND_MAX_INTERVAL);\n+    } else {\n+        interval = ANNOUNCE_FRIEND_NEW_INTERVAL;\n+    }\n+\n+    if (o_friend->is_online) {\n+        return;\n+    }\n+\n+    assert(interval >= ANNOUNCE_FRIEND_NEW_INTERVAL); // an int overflow would be devastating\n \n-        if (backoff_interval > ONION_FRIEND_MAX_PING_INTERVAL) {\n-            backoff_interval = ONION_FRIEND_MAX_PING_INTERVAL;\n+    /* send packets to friend telling them our DHT public key. */\n+    if (mono_time_is_timeout(onion_c->mono_time, onion_c->friends_list[friendnum].last_dht_pk_onion_sent,\n+                             ONION_DHTPK_SEND_INTERVAL)) {\n+        if (send_dhtpk_announce(onion_c, friendnum, 0) >= 1) {\n+            onion_c->friends_list[friendnum].last_dht_pk_onion_sent = tm;\n         }\n+    }\n \n-        if (interval < backoff_interval) {\n-            interval = backoff_interval;\n+    if (mono_time_is_timeout(onion_c->mono_time, onion_c->friends_list[friendnum].last_dht_pk_dht_sent,\n+                             DHT_DHTPK_SEND_INTERVAL)) {\n+        if (send_dhtpk_announce(onion_c, friendnum, 1) >= 1) {\n+            onion_c->friends_list[friendnum].last_dht_pk_dht_sent = tm;\n         }\n     }\n \n-    if (!onion_c->friends_list[friendnum].is_online) {\n-        unsigned int count = 0;\n-        Onion_Node *node_list = onion_c->friends_list[friendnum].clients_list;\n+    uint16_t count = 0;  // number of alive path nodes\n \n-        // ensure we get a response from some node roughly once per\n-        // (interval / MAX_ONION_CLIENTS)\n-        bool ping_random = true;\n+    Onion_Node *list_nodes = o_friend->clients_list;",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/2078#discussion_r818775863",
            "id": 818775863,
            "line": null,
            "node_id": "PRRC_kwDOA7zIGs4wzYc3",
            "original_commit_id": "5a75979f39358385bc360a0a3a9fad3aaa8bf35a",
            "original_line": 1616,
            "original_position": 175,
            "original_start_line": null,
            "path": "toxcore/onion_client.c",
            "position": null,
            "pull_request_review_id": 899094986,
            "pull_request_url": "https://api.github.com/repos/TokTok/c-toxcore/pulls/2078",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/pulls/comments/818775863/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2022-03-03T15:33:53Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/pulls/comments/818775863",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "NONE",
            "body": "# [Codecov](https://codecov.io/gh/TokTok/c-toxcore/pull/2078?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok) Report\n> Merging [#2078](https://codecov.io/gh/TokTok/c-toxcore/pull/2078?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok) (0dca481) into [master](https://codecov.io/gh/TokTok/c-toxcore/commit/6c2014d7195aaf89dd82e10bad6d65ffef0996aa?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok) (6c2014d) will **increase** coverage by `0.06%`.\n> The diff coverage is `96.51%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/TokTok/c-toxcore/pull/2078/graphs/tree.svg?width=650&height=150&src=pr&token=BRfCKo02De&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok)](https://codecov.io/gh/TokTok/c-toxcore/pull/2078?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #2078      +/-   ##\n==========================================\n+ Coverage   78.15%   78.22%   +0.06%     \n==========================================\n  Files         117      117              \n  Lines       21516    21527      +11     \n==========================================\n+ Hits        16816    16839      +23     \n+ Misses       4700     4688      -12     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/TokTok/c-toxcore/pull/2078?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok) | Coverage Δ | |\n|---|---|---|\n| [toxcore/onion\\_client.c](https://codecov.io/gh/TokTok/c-toxcore/pull/2078/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok#diff-dG94Y29yZS9vbmlvbl9jbGllbnQuYw==) | `91.25% <96.51%> (-0.63%)` | :arrow_down: |\n| [toxcore/onion\\_announce.c](https://codecov.io/gh/TokTok/c-toxcore/pull/2078/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok#diff-dG94Y29yZS9vbmlvbl9hbm5vdW5jZS5j) | `90.41% <0.00%> (-0.92%)` | :arrow_down: |\n| [toxcore/net\\_crypto.c](https://codecov.io/gh/TokTok/c-toxcore/pull/2078/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok#diff-dG94Y29yZS9uZXRfY3J5cHRvLmM=) | `89.43% <0.00%> (-0.75%)` | :arrow_down: |\n| [toxcore/friend\\_connection.c](https://codecov.io/gh/TokTok/c-toxcore/pull/2078/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok#diff-dG94Y29yZS9mcmllbmRfY29ubmVjdGlvbi5j) | `83.06% <0.00%> (-0.70%)` | :arrow_down: |\n| [toxcore/onion.c](https://codecov.io/gh/TokTok/c-toxcore/pull/2078/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok#diff-dG94Y29yZS9vbmlvbi5j) | `87.18% <0.00%> (-0.28%)` | :arrow_down: |\n| [toxcore/DHT.c](https://codecov.io/gh/TokTok/c-toxcore/pull/2078/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok#diff-dG94Y29yZS9ESFQuYw==) | `83.77% <0.00%> (ø)` | |\n| [toxcore/Messenger.c](https://codecov.io/gh/TokTok/c-toxcore/pull/2078/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok#diff-dG94Y29yZS9NZXNzZW5nZXIuYw==) | `83.83% <0.00%> (+0.14%)` | :arrow_up: |\n| [toxav/toxav.c](https://codecov.io/gh/TokTok/c-toxcore/pull/2078/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok#diff-dG94YXYvdG94YXYuYw==) | `69.37% <0.00%> (+0.29%)` | :arrow_up: |\n| [toxav/groupav.c](https://codecov.io/gh/TokTok/c-toxcore/pull/2078/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok#diff-dG94YXYvZ3JvdXBhdi5j) | `75.91% <0.00%> (+1.33%)` | :arrow_up: |\n| ... and [2 more](https://codecov.io/gh/TokTok/c-toxcore/pull/2078/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/TokTok/c-toxcore/pull/2078?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/TokTok/c-toxcore/pull/2078?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok). Last update [6c2014d...0dca481](https://codecov.io/gh/TokTok/c-toxcore/pull/2078?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=TokTok).\n",
            "created_at": "2022-02-19T03:57:27Z",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/2078#issuecomment-1045693460",
            "id": 1045693460,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/2078",
            "node_id": "IC_kwDOA7zIGs4-VAQU",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/1045693460/reactions"
            },
            "updated_at": "2022-03-03T16:02:00Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/1045693460",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/in/254?v=4",
                "events_url": "https://api.github.com/users/codecov%5Bbot%5D/events{/privacy}",
                "followers_url": "https://api.github.com/users/codecov%5Bbot%5D/followers",
                "following_url": "https://api.github.com/users/codecov%5Bbot%5D/following{/other_user}",
                "gists_url": "https://api.github.com/users/codecov%5Bbot%5D/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/apps/codecov",
                "id": 22429695,
                "login": "codecov[bot]",
                "node_id": "MDM6Qm90MjI0Mjk2OTU=",
                "organizations_url": "https://api.github.com/users/codecov%5Bbot%5D/orgs",
                "received_events_url": "https://api.github.com/users/codecov%5Bbot%5D/received_events",
                "repos_url": "https://api.github.com/users/codecov%5Bbot%5D/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/codecov%5Bbot%5D/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/codecov%5Bbot%5D/subscriptions",
                "type": "Bot",
                "url": "https://api.github.com/users/codecov%5Bbot%5D",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/2078/comments",
    "commit_data": [
        {
            "author": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1646057?v=4",
                "events_url": "https://api.github.com/users/JFreegman/events{/privacy}",
                "followers_url": "https://api.github.com/users/JFreegman/followers",
                "following_url": "https://api.github.com/users/JFreegman/following{/other_user}",
                "gists_url": "https://api.github.com/users/JFreegman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JFreegman",
                "id": 1646057,
                "login": "JFreegman",
                "node_id": "MDQ6VXNlcjE2NDYwNTc=",
                "organizations_url": "https://api.github.com/users/JFreegman/orgs",
                "received_events_url": "https://api.github.com/users/JFreegman/received_events",
                "repos_url": "https://api.github.com/users/JFreegman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JFreegman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JFreegman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JFreegman",
                "user_view_type": "public"
            },
            "comments_url": "https://api.github.com/repos/TokTok/c-toxcore/commits/af5dd43c98c693538d1cc056e97bb6c739ccbce8/comments",
            "commit": {
                "author": {
                    "date": "2022-02-21T06:42:18Z",
                    "email": "jfreegman@gmail.com",
                    "name": "jfreegman"
                },
                "comment_count": 0,
                "committer": {
                    "date": "2022-03-03T15:40:22Z",
                    "email": "jfreegman@gmail.com",
                    "name": "jfreegman"
                },
                "message": "Refactor onion_client.c do_friends()\n\nThis commit simplifies the logic determining how often we\nsend announce request packets to offline peers and how often\nwe attempt to re-populate our nodes lists. It also removes\nsome randomness from packet sending that was intended to\nreduce network traffic but greatly increased the code complexity\nand didn't really do all that much to help.\n\nWe now aggressively search the DHT for offline friends when we first\nbootstrap, add a new friend, or when a friend goes offline, for a\nshort duration until we've sent a certain number of successful\nlookup requests. Thereafter, we send one lookup request every 3\nminutes for each node associated with the friend (typically\nbetween 4 and 8), for each friend.\n\nWe also no longer spam node requests whenever our list of living\nnodes drops below the maximum. Instead, we repopulate the nodes\nlist only when it drops to or below half the maximum, or after\na 10 minute timeout.\n\nThe effects of these changes is a decrease in overall tox network\ntraffic by about 30-40% with UDP enabled, and a bit less than\nthat with UDP disabled. The network may also be more reliable\noverall because everything is significantly more deterministic\nand less random",
                "tree": {
                    "sha": "d8b440921a0d8c43f49b2d5a2681e64191dc4dcf",
                    "url": "https://api.github.com/repos/TokTok/c-toxcore/git/trees/d8b440921a0d8c43f49b2d5a2681e64191dc4dcf"
                },
                "url": "https://api.github.com/repos/TokTok/c-toxcore/git/commits/af5dd43c98c693538d1cc056e97bb6c739ccbce8",
                "verification": {
                    "payload": "tree d8b440921a0d8c43f49b2d5a2681e64191dc4dcf\nparent 6c2014d7195aaf89dd82e10bad6d65ffef0996aa\nauthor jfreegman <jfreegman@gmail.com> 1645425738 -0500\ncommitter jfreegman <jfreegman@gmail.com> 1646322022 -0500\n\nRefactor onion_client.c do_friends()\n\nThis commit simplifies the logic determining how often we\nsend announce request packets to offline peers and how often\nwe attempt to re-populate our nodes lists. It also removes\nsome randomness from packet sending that was intended to\nreduce network traffic but greatly increased the code complexity\nand didn't really do all that much to help.\n\nWe now aggressively search the DHT for offline friends when we first\nbootstrap, add a new friend, or when a friend goes offline, for a\nshort duration until we've sent a certain number of successful\nlookup requests. Thereafter, we send one lookup request every 3\nminutes for each node associated with the friend (typically\nbetween 4 and 8), for each friend.\n\nWe also no longer spam node requests whenever our list of living\nnodes drops below the maximum. Instead, we repopulate the nodes\nlist only when it drops to or below half the maximum, or after\na 10 minute timeout.\n\nThe effects of these changes is a decrease in overall tox network\ntraffic by about 30-40% with UDP enabled, and a bit less than\nthat with UDP disabled. The network may also be more reliable\noverall because everything is significantly more deterministic\nand less random\n",
                    "reason": "valid",
                    "signature": "-----BEGIN PGP SIGNATURE-----\n\niQFIBAABCgAyFiEEur0AVzoGW/qQ1T1WNifzFEB2rmMFAmIg4WYUHGpmcmVlZ21h\nbkBnbWFpbC5jb20ACgkQNifzFEB2rmN9MQf8Dra7gIQJ29PUa3XM+WppluX1SiPD\nJutjCxOyxdfCOMdiXXacw/IgCuDwXXVsp1Dy76xx7IVnS8UsgSSV4RetyN3v7RA6\nu7uBldLubaIAVCDZPx1fWZ8rTeqfK501/qWGrwbRsf0xdsV/3HNO6K9ms3ygTiXD\nLEBoCzYCaB/vVNPP9BJWozWdmxeebz5iQ/rNvTcTSHQW+vlSN3yc4hZWFvH3tmAH\nqrblhuMSloEH/tZvqT9+UgYYJyeSAztuMnePVSOqisjmOgWJA+f2m4lzYybaTXYO\nJhtlHlxWHmaJQSzCao1y7Bm7xoFqwVBTelZwsKmVgNaSK51nrLTMHWH1yg==\n=M+Lf\n-----END PGP SIGNATURE-----",
                    "verified": true,
                    "verified_at": "2024-11-09T21:40:29Z"
                }
            },
            "committer": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1646057?v=4",
                "events_url": "https://api.github.com/users/JFreegman/events{/privacy}",
                "followers_url": "https://api.github.com/users/JFreegman/followers",
                "following_url": "https://api.github.com/users/JFreegman/following{/other_user}",
                "gists_url": "https://api.github.com/users/JFreegman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JFreegman",
                "id": 1646057,
                "login": "JFreegman",
                "node_id": "MDQ6VXNlcjE2NDYwNTc=",
                "organizations_url": "https://api.github.com/users/JFreegman/orgs",
                "received_events_url": "https://api.github.com/users/JFreegman/received_events",
                "repos_url": "https://api.github.com/users/JFreegman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JFreegman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JFreegman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JFreegman",
                "user_view_type": "public"
            },
            "html_url": "https://github.com/TokTok/c-toxcore/commit/af5dd43c98c693538d1cc056e97bb6c739ccbce8",
            "node_id": "C_kwDOAQ6L0toAKGFmNWRkNDNjOThjNjkzNTM4ZDFjYzA1NmU5N2JiNmM3MzljY2JjZTg",
            "parents": [
                {
                    "html_url": "https://github.com/TokTok/c-toxcore/commit/6c2014d7195aaf89dd82e10bad6d65ffef0996aa",
                    "sha": "6c2014d7195aaf89dd82e10bad6d65ffef0996aa",
                    "url": "https://api.github.com/repos/TokTok/c-toxcore/commits/6c2014d7195aaf89dd82e10bad6d65ffef0996aa"
                }
            ],
            "sha": "af5dd43c98c693538d1cc056e97bb6c739ccbce8",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/commits/af5dd43c98c693538d1cc056e97bb6c739ccbce8"
        },
        {
            "author": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1646057?v=4",
                "events_url": "https://api.github.com/users/JFreegman/events{/privacy}",
                "followers_url": "https://api.github.com/users/JFreegman/followers",
                "following_url": "https://api.github.com/users/JFreegman/following{/other_user}",
                "gists_url": "https://api.github.com/users/JFreegman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JFreegman",
                "id": 1646057,
                "login": "JFreegman",
                "node_id": "MDQ6VXNlcjE2NDYwNTc=",
                "organizations_url": "https://api.github.com/users/JFreegman/orgs",
                "received_events_url": "https://api.github.com/users/JFreegman/received_events",
                "repos_url": "https://api.github.com/users/JFreegman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JFreegman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JFreegman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JFreegman",
                "user_view_type": "public"
            },
            "comments_url": "https://api.github.com/repos/TokTok/c-toxcore/commits/0dca481e1daa32a2fcccb0a2f86ccc841a7b32b1/comments",
            "commit": {
                "author": {
                    "date": "2022-03-03T15:43:54Z",
                    "email": "jfreegman@gmail.com",
                    "name": "jfreegman"
                },
                "comment_count": 0,
                "committer": {
                    "date": "2022-03-03T15:43:54Z",
                    "email": "jfreegman@gmail.com",
                    "name": "jfreegman"
                },
                "message": "Re-implement progressive backoff interval for friend finding\n\nWe now exponentially reduce the frequency of friend lookups based on how many\nlookups we've already made for an offline friend",
                "tree": {
                    "sha": "801d5dd92a344ab2273d5a48641f9bedce06a3a9",
                    "url": "https://api.github.com/repos/TokTok/c-toxcore/git/trees/801d5dd92a344ab2273d5a48641f9bedce06a3a9"
                },
                "url": "https://api.github.com/repos/TokTok/c-toxcore/git/commits/0dca481e1daa32a2fcccb0a2f86ccc841a7b32b1",
                "verification": {
                    "payload": "tree 801d5dd92a344ab2273d5a48641f9bedce06a3a9\nparent af5dd43c98c693538d1cc056e97bb6c739ccbce8\nauthor jfreegman <jfreegman@gmail.com> 1646322234 -0500\ncommitter jfreegman <jfreegman@gmail.com> 1646322234 -0500\n\nRe-implement progressive backoff interval for friend finding\n\nWe now exponentially reduce the frequency of friend lookups based on how many\nlookups we've already made for an offline friend\n",
                    "reason": "valid",
                    "signature": "-----BEGIN PGP SIGNATURE-----\n\niQFIBAABCgAyFiEEur0AVzoGW/qQ1T1WNifzFEB2rmMFAmIg4joUHGpmcmVlZ21h\nbkBnbWFpbC5jb20ACgkQNifzFEB2rmP0Dwf+Ohp0zFGT3Ybvv+ati5/zeWPnDuPu\nQQJVNgU2xVT49MQdwXEGlZzG+CBCJtDlzvGOByjMONNLaGwe39SAjpAYO+Td0dth\nZMyF6kBx9T0MEmmR8qkXug8ZP17ocyTTgD8unUsHIMLfjBm3J1TY1Pt0ybwCS9oM\nLeB6OJacUdE8QsKNP2QnfaeF5+TcbevVxz56qxC5+/lQwmRG8tKdg1gAg1jKSjB2\n8MQcq8raw63Vsfeh/8dK8lBSny/bwyEHJ5fy0Oy7D6b72Y0Ijh5Brt31PIHP6/Y4\nI4JZ/N0JVs2yq2K+VRTa7Y5b7+6SyIih+mIluzeVFU+01h1SFpFP2LnGBw==\n=oC/h\n-----END PGP SIGNATURE-----",
                    "verified": true,
                    "verified_at": "2024-11-09T21:40:29Z"
                }
            },
            "committer": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1646057?v=4",
                "events_url": "https://api.github.com/users/JFreegman/events{/privacy}",
                "followers_url": "https://api.github.com/users/JFreegman/followers",
                "following_url": "https://api.github.com/users/JFreegman/following{/other_user}",
                "gists_url": "https://api.github.com/users/JFreegman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JFreegman",
                "id": 1646057,
                "login": "JFreegman",
                "node_id": "MDQ6VXNlcjE2NDYwNTc=",
                "organizations_url": "https://api.github.com/users/JFreegman/orgs",
                "received_events_url": "https://api.github.com/users/JFreegman/received_events",
                "repos_url": "https://api.github.com/users/JFreegman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JFreegman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JFreegman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JFreegman",
                "user_view_type": "public"
            },
            "html_url": "https://github.com/TokTok/c-toxcore/commit/0dca481e1daa32a2fcccb0a2f86ccc841a7b32b1",
            "node_id": "C_kwDOAQ6L0toAKDBkY2E0ODFlMWRhYTMyYTJmY2NjYjBhMmY4NmNjYzg0MWE3YjMyYjE",
            "parents": [
                {
                    "html_url": "https://github.com/TokTok/c-toxcore/commit/af5dd43c98c693538d1cc056e97bb6c739ccbce8",
                    "sha": "af5dd43c98c693538d1cc056e97bb6c739ccbce8",
                    "url": "https://api.github.com/repos/TokTok/c-toxcore/commits/af5dd43c98c693538d1cc056e97bb6c739ccbce8"
                }
            ],
            "sha": "0dca481e1daa32a2fcccb0a2f86ccc841a7b32b1",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/commits/0dca481e1daa32a2fcccb0a2f86ccc841a7b32b1"
        }
    ],
    "commits": 2,
    "commits_url": "https://api.github.com/repos/TokTok/c-toxcore/pulls/2078/commits",
    "created_at": "2022-02-19T03:45:32Z",
    "deletions": 113,
    "diff_url": "https://github.com/TokTok/c-toxcore/pull/2078.diff",
    "draft": false,
    "head": {
        "label": "JFreegman:onion_lookups",
        "ref": "onion_lookups",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/JFreegman/toxcore/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/JFreegman/toxcore/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/JFreegman/toxcore/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/JFreegman/toxcore/branches{/branch}",
            "clone_url": "https://github.com/JFreegman/toxcore.git",
            "collaborators_url": "https://api.github.com/repos/JFreegman/toxcore/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/JFreegman/toxcore/comments{/number}",
            "commits_url": "https://api.github.com/repos/JFreegman/toxcore/commits{/sha}",
            "compare_url": "https://api.github.com/repos/JFreegman/toxcore/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/JFreegman/toxcore/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/JFreegman/toxcore/contributors",
            "created_at": "2014-03-14T00:23:47Z",
            "default_branch": "ngc_merge",
            "deployments_url": "https://api.github.com/repos/JFreegman/toxcore/deployments",
            "description": "The future of online communications (new groupchats version)",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/JFreegman/toxcore/downloads",
            "events_url": "https://api.github.com/repos/JFreegman/toxcore/events",
            "fork": true,
            "forks": 3,
            "forks_count": 3,
            "forks_url": "https://api.github.com/repos/JFreegman/toxcore/forks",
            "full_name": "JFreegman/toxcore",
            "git_commits_url": "https://api.github.com/repos/JFreegman/toxcore/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/JFreegman/toxcore/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/JFreegman/toxcore/git/tags{/sha}",
            "git_url": "git://github.com/JFreegman/toxcore.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "http://tox.chat",
            "hooks_url": "https://api.github.com/repos/JFreegman/toxcore/hooks",
            "html_url": "https://github.com/JFreegman/toxcore",
            "id": 17730514,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/JFreegman/toxcore/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/JFreegman/toxcore/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/JFreegman/toxcore/issues{/number}",
            "keys_url": "https://api.github.com/repos/JFreegman/toxcore/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/JFreegman/toxcore/labels{/name}",
            "language": "C",
            "languages_url": "https://api.github.com/repos/JFreegman/toxcore/languages",
            "license": {
                "key": "gpl-3.0",
                "name": "GNU General Public License v3.0",
                "node_id": "MDc6TGljZW5zZTk=",
                "spdx_id": "GPL-3.0",
                "url": "https://api.github.com/licenses/gpl-3.0"
            },
            "merges_url": "https://api.github.com/repos/JFreegman/toxcore/merges",
            "milestones_url": "https://api.github.com/repos/JFreegman/toxcore/milestones{/number}",
            "mirror_url": null,
            "name": "toxcore",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNzczMDUxNA==",
            "notifications_url": "https://api.github.com/repos/JFreegman/toxcore/notifications{?since,all,participating}",
            "open_issues": 3,
            "open_issues_count": 3,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1646057?v=4",
                "events_url": "https://api.github.com/users/JFreegman/events{/privacy}",
                "followers_url": "https://api.github.com/users/JFreegman/followers",
                "following_url": "https://api.github.com/users/JFreegman/following{/other_user}",
                "gists_url": "https://api.github.com/users/JFreegman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JFreegman",
                "id": 1646057,
                "login": "JFreegman",
                "node_id": "MDQ6VXNlcjE2NDYwNTc=",
                "organizations_url": "https://api.github.com/users/JFreegman/orgs",
                "received_events_url": "https://api.github.com/users/JFreegman/received_events",
                "repos_url": "https://api.github.com/users/JFreegman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JFreegman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JFreegman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JFreegman",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/JFreegman/toxcore/pulls{/number}",
            "pushed_at": "2025-01-15T19:50:15Z",
            "releases_url": "https://api.github.com/repos/JFreegman/toxcore/releases{/id}",
            "size": 23096,
            "ssh_url": "git@github.com:JFreegman/toxcore.git",
            "stargazers_count": 29,
            "stargazers_url": "https://api.github.com/repos/JFreegman/toxcore/stargazers",
            "statuses_url": "https://api.github.com/repos/JFreegman/toxcore/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/JFreegman/toxcore/subscribers",
            "subscription_url": "https://api.github.com/repos/JFreegman/toxcore/subscription",
            "svn_url": "https://github.com/JFreegman/toxcore",
            "tags_url": "https://api.github.com/repos/JFreegman/toxcore/tags",
            "teams_url": "https://api.github.com/repos/JFreegman/toxcore/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/JFreegman/toxcore/git/trees{/sha}",
            "updated_at": "2024-10-25T16:07:26Z",
            "url": "https://api.github.com/repos/JFreegman/toxcore",
            "visibility": "public",
            "watchers": 29,
            "watchers_count": 29,
            "web_commit_signoff_required": false
        },
        "sha": "0dca481e1daa32a2fcccb0a2f86ccc841a7b32b1",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1646057?v=4",
            "events_url": "https://api.github.com/users/JFreegman/events{/privacy}",
            "followers_url": "https://api.github.com/users/JFreegman/followers",
            "following_url": "https://api.github.com/users/JFreegman/following{/other_user}",
            "gists_url": "https://api.github.com/users/JFreegman/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/JFreegman",
            "id": 1646057,
            "login": "JFreegman",
            "node_id": "MDQ6VXNlcjE2NDYwNTc=",
            "organizations_url": "https://api.github.com/users/JFreegman/orgs",
            "received_events_url": "https://api.github.com/users/JFreegman/received_events",
            "repos_url": "https://api.github.com/users/JFreegman/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/JFreegman/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/JFreegman/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/JFreegman",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/TokTok/c-toxcore/pull/2078",
    "id": 858177980,
    "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/2078",
    "labels": [
        {
            "color": "fef2c0",
            "default": false,
            "description": "A code change that improves performance",
            "id": 2037200638,
            "name": "performance",
            "node_id": "MDU6TGFiZWwyMDM3MjAwNjM4",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/labels/performance"
        }
    ],
    "locked": false,
    "maintainer_can_modify": false,
    "merge_commit_sha": "0dca481e1daa32a2fcccb0a2f86ccc841a7b32b1",
    "mergeable": null,
    "mergeable_state": "unknown",
    "merged": true,
    "merged_at": "2022-03-03T16:02:37Z",
    "merged_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/41485111?v=4",
        "events_url": "https://api.github.com/users/toktok-releaser/events{/privacy}",
        "followers_url": "https://api.github.com/users/toktok-releaser/followers",
        "following_url": "https://api.github.com/users/toktok-releaser/following{/other_user}",
        "gists_url": "https://api.github.com/users/toktok-releaser/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/toktok-releaser",
        "id": 41485111,
        "login": "toktok-releaser",
        "node_id": "MDQ6VXNlcjQxNDg1MTEx",
        "organizations_url": "https://api.github.com/users/toktok-releaser/orgs",
        "received_events_url": "https://api.github.com/users/toktok-releaser/received_events",
        "repos_url": "https://api.github.com/users/toktok-releaser/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/toktok-releaser/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/toktok-releaser/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/toktok-releaser",
        "user_view_type": "public"
    },
    "milestone": {
        "closed_at": "2022-03-06T01:45:45Z",
        "closed_issues": 55,
        "created_at": "2022-02-06T21:10:29Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
            "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
            "followers_url": "https://api.github.com/users/iphydf/followers",
            "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
            "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/iphydf",
            "id": 10647936,
            "login": "iphydf",
            "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
            "organizations_url": "https://api.github.com/users/iphydf/orgs",
            "received_events_url": "https://api.github.com/users/iphydf/received_events",
            "repos_url": "https://api.github.com/users/iphydf/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/iphydf",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/TokTok/c-toxcore/milestone/46",
        "id": 7646314,
        "labels_url": "https://api.github.com/repos/TokTok/c-toxcore/milestones/46/labels",
        "node_id": "MI_kwDOA7zIGs4AdKxq",
        "number": 46,
        "open_issues": 0,
        "state": "closed",
        "title": "v0.2.17",
        "updated_at": "2022-03-06T01:45:45Z",
        "url": "https://api.github.com/repos/TokTok/c-toxcore/milestones/46"
    },
    "node_id": "PR_kwDOA7zIGs4zJsG8",
    "number": 2078,
    "patch_url": "https://github.com/TokTok/c-toxcore/pull/2078.patch",
    "rebaseable": null,
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/TokTok/c-toxcore/pulls/comments{/number}",
    "review_comments": 2,
    "review_comments_url": "https://api.github.com/repos/TokTok/c-toxcore/pulls/2078/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/TokTok/c-toxcore/statuses/0dca481e1daa32a2fcccb0a2f86ccc841a7b32b1",
    "title": "perf: Refactor onion_client.c do_friends() to reduce network traffic",
    "updated_at": "2022-03-03T16:18:52Z",
    "url": "https://api.github.com/repos/TokTok/c-toxcore/pulls/2078",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1646057?v=4",
        "events_url": "https://api.github.com/users/JFreegman/events{/privacy}",
        "followers_url": "https://api.github.com/users/JFreegman/followers",
        "following_url": "https://api.github.com/users/JFreegman/following{/other_user}",
        "gists_url": "https://api.github.com/users/JFreegman/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/JFreegman",
        "id": 1646057,
        "login": "JFreegman",
        "node_id": "MDQ6VXNlcjE2NDYwNTc=",
        "organizations_url": "https://api.github.com/users/JFreegman/orgs",
        "received_events_url": "https://api.github.com/users/JFreegman/received_events",
        "repos_url": "https://api.github.com/users/JFreegman/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/JFreegman/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/JFreegman/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/JFreegman",
        "user_view_type": "public"
    }
}