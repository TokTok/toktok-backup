{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/TokTok/c-toxcore/issues/511/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/TokTok/c-toxcore/pulls/511/commits"
        },
        "html": {
            "href": "https://github.com/TokTok/c-toxcore/pull/511"
        },
        "issue": {
            "href": "https://api.github.com/repos/TokTok/c-toxcore/issues/511"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/TokTok/c-toxcore/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/TokTok/c-toxcore/pulls/511/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/TokTok/c-toxcore/pulls/511"
        },
        "statuses": {
            "href": "https://api.github.com/repos/TokTok/c-toxcore/statuses/2474f43087f67cd9ac993a7ef78bfd81e2b083d7"
        }
    },
    "active_lock_reason": null,
    "additions": 16,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "auto_merge": null,
    "base": {
        "label": "TokTok:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/TokTok/c-toxcore/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/TokTok/c-toxcore/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/TokTok/c-toxcore/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/TokTok/c-toxcore/branches{/branch}",
            "clone_url": "https://github.com/TokTok/c-toxcore.git",
            "collaborators_url": "https://api.github.com/repos/TokTok/c-toxcore/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/TokTok/c-toxcore/comments{/number}",
            "commits_url": "https://api.github.com/repos/TokTok/c-toxcore/commits{/sha}",
            "compare_url": "https://api.github.com/repos/TokTok/c-toxcore/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/TokTok/c-toxcore/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/TokTok/c-toxcore/contributors",
            "created_at": "2016-07-06T08:15:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/TokTok/c-toxcore/deployments",
            "description": "The future of online communications.",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/TokTok/c-toxcore/downloads",
            "events_url": "https://api.github.com/repos/TokTok/c-toxcore/events",
            "fork": true,
            "forks": 292,
            "forks_count": 292,
            "forks_url": "https://api.github.com/repos/TokTok/c-toxcore/forks",
            "full_name": "TokTok/c-toxcore",
            "git_commits_url": "https://api.github.com/repos/TokTok/c-toxcore/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/TokTok/c-toxcore/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/TokTok/c-toxcore/git/tags{/sha}",
            "git_url": "git://github.com/TokTok/c-toxcore.git",
            "has_discussions": false,
            "has_downloads": false,
            "has_issues": true,
            "has_pages": false,
            "has_projects": false,
            "has_wiki": false,
            "homepage": "https://tox.chat",
            "hooks_url": "https://api.github.com/repos/TokTok/c-toxcore/hooks",
            "html_url": "https://github.com/TokTok/c-toxcore",
            "id": 62703642,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/TokTok/c-toxcore/issues{/number}",
            "keys_url": "https://api.github.com/repos/TokTok/c-toxcore/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/TokTok/c-toxcore/labels{/name}",
            "language": "C",
            "languages_url": "https://api.github.com/repos/TokTok/c-toxcore/languages",
            "license": {
                "key": "gpl-3.0",
                "name": "GNU General Public License v3.0",
                "node_id": "MDc6TGljZW5zZTk=",
                "spdx_id": "GPL-3.0",
                "url": "https://api.github.com/licenses/gpl-3.0"
            },
            "merges_url": "https://api.github.com/repos/TokTok/c-toxcore/merges",
            "milestones_url": "https://api.github.com/repos/TokTok/c-toxcore/milestones{/number}",
            "mirror_url": null,
            "name": "c-toxcore",
            "node_id": "MDEwOlJlcG9zaXRvcnk2MjcwMzY0Mg==",
            "notifications_url": "https://api.github.com/repos/TokTok/c-toxcore/notifications{?since,all,participating}",
            "open_issues": 210,
            "open_issues_count": 210,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/17427091?v=4",
                "events_url": "https://api.github.com/users/TokTok/events{/privacy}",
                "followers_url": "https://api.github.com/users/TokTok/followers",
                "following_url": "https://api.github.com/users/TokTok/following{/other_user}",
                "gists_url": "https://api.github.com/users/TokTok/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/TokTok",
                "id": 17427091,
                "login": "TokTok",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjE3NDI3MDkx",
                "organizations_url": "https://api.github.com/users/TokTok/orgs",
                "received_events_url": "https://api.github.com/users/TokTok/received_events",
                "repos_url": "https://api.github.com/users/TokTok/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/TokTok/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/TokTok/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/TokTok",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/TokTok/c-toxcore/pulls{/number}",
            "pushed_at": "2025-01-24T18:18:40Z",
            "releases_url": "https://api.github.com/repos/TokTok/c-toxcore/releases{/id}",
            "size": 25245,
            "ssh_url": "git@github.com:TokTok/c-toxcore.git",
            "stargazers_count": 2329,
            "stargazers_url": "https://api.github.com/repos/TokTok/c-toxcore/stargazers",
            "statuses_url": "https://api.github.com/repos/TokTok/c-toxcore/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/TokTok/c-toxcore/subscribers",
            "subscription_url": "https://api.github.com/repos/TokTok/c-toxcore/subscription",
            "svn_url": "https://github.com/TokTok/c-toxcore",
            "tags_url": "https://api.github.com/repos/TokTok/c-toxcore/tags",
            "teams_url": "https://api.github.com/repos/TokTok/c-toxcore/teams",
            "topics": [
                "cryptography",
                "encryption",
                "network",
                "p2p",
                "security",
                "toxcore"
            ],
            "trees_url": "https://api.github.com/repos/TokTok/c-toxcore/git/trees{/sha}",
            "updated_at": "2025-01-24T22:05:30Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore",
            "visibility": "public",
            "watchers": 2329,
            "watchers_count": 2329,
            "web_commit_signoff_required": false
        },
        "sha": "f6db9333e2d1262e7ba3846563c30f63c98ffa38",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/17427091?v=4",
            "events_url": "https://api.github.com/users/TokTok/events{/privacy}",
            "followers_url": "https://api.github.com/users/TokTok/followers",
            "following_url": "https://api.github.com/users/TokTok/following{/other_user}",
            "gists_url": "https://api.github.com/users/TokTok/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/TokTok",
            "id": 17427091,
            "login": "TokTok",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjE3NDI3MDkx",
            "organizations_url": "https://api.github.com/users/TokTok/orgs",
            "received_events_url": "https://api.github.com/users/TokTok/received_events",
            "repos_url": "https://api.github.com/users/TokTok/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/TokTok/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TokTok/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/TokTok",
            "user_view_type": "public"
        }
    },
    "body": "Currently, when we receive a response to a getnodes request, for each node in\nthe response we check if it could be added to the close list, and if so we send\nthe node a getnodes request; if it replies, we add it to the close list.\n\nWe do the same for each friends list, but for them we first check whether the\nnode is already on the friends list, and don't send a getnodes request if it\nis.\n\nThis change adds a corresponding check for the close list, such that we only\nsend a getnodes request if the node can be added to the close list *and* is not\nalready on the close list.\n\nThe original behaviour could, and as far as I can see should be expected\ntypically to, lead to getnode loops resulting in lots of unnecessary traffic.\nThis can happen as follows: suppose A, B, and C are all close to each other in\nthe DHT, and all know each other, and A sends B a getnodes request searching\nfor A (as happens at least every 60 seconds). B's response will likely include\nC. It's quite likely that the part of A's close list (the \"k-bucket\") into\nwhich C falls will not be full, i.e. that A does not know 8 nodes at that\ndistance. Then even though A already knows C, when A receives B's response A\nwill send a getnodes to C. Then C's response is likely to include B, in which\ncase (if that bucket is also not full) A will send another getnodes to B. So we\nobtain a tight loop, with the only delays being network delays and the delay\nbetween calls to do_DHT().\n\nI don't see that there can be any downside to adding this check, but I'm not\nentirely confident that I couldn't be missing something subtle, so please do\nreview carefully.\n\n<!-- Reviewable:start -->\n---\nThis change is [<img src=\"https://reviewable.io/review_button.svg\" height=\"34\" align=\"absmiddle\" alt=\"Reviewable\"/>](https://reviewable.io/reviews/toktok/c-toxcore/511)\n<!-- Reviewable:end -->\n",
    "changed_files": 1,
    "closed_at": "2017-04-29T17:02:06Z",
    "comment_data": [],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "I did some primitive testing, and I'm sad to say that this patch doesn't seem to lead to any immediately discernable reduction in bandwidth. Whether this is because the scenario I sketched isn't actually occuring, or just because it's being drowned out by all the other sources of bandwidth use, I don't know.",
            "created_at": "2017-03-12T15:23:30Z",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/511#issuecomment-285951709",
            "id": 285951709,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTk1MTcwOQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/285951709/reactions"
            },
            "updated_at": "2017-03-12T15:23:30Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/285951709",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/590069?v=4",
                "events_url": "https://api.github.com/users/zugz/events{/privacy}",
                "followers_url": "https://api.github.com/users/zugz/followers",
                "following_url": "https://api.github.com/users/zugz/following{/other_user}",
                "gists_url": "https://api.github.com/users/zugz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zugz",
                "id": 590069,
                "login": "zugz",
                "node_id": "MDQ6VXNlcjU5MDA2OQ==",
                "organizations_url": "https://api.github.com/users/zugz/orgs",
                "received_events_url": "https://api.github.com/users/zugz/received_events",
                "repos_url": "https://api.github.com/users/zugz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zugz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zugz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zugz",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "\n\n\n\nReviewed 1 of 1 files at r1.\nReview status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.\n\n---\n\n*[toxcore/DHT.c, line 1025 at r1](https://reviewable.io:443/reviews/toktok/c-toxcore/511#-Kfveq4VV6Tj0gSbGrLa:-Kfveq4VV6Tj0gSbGrLb:b42aezb) ([raw file](https://github.com/toktok/c-toxcore/blob/2f172769d11b03488ea278dc34c0c421b211b759/toxcore/DHT.c#L1025)):*\n> ```C\n> \n>     if (index > LCLIENT_LENGTH) {\n>         index = LCLIENT_LENGTH - 1;\n> ```\n\nSo `LCLIENT_LENGTH` is okay, but you set index to `LCLIENT_LENGTH - 1`? Did you mean to use `>=` in the if-check or is this all intentional?\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io:443/reviews/toktok/c-toxcore/511)*\n<!-- Sent from Reviewable.io -->\n",
            "created_at": "2017-03-23T14:58:38Z",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/511#issuecomment-288746294",
            "id": 288746294,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODc0NjI5NA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/288746294/reactions"
            },
            "updated_at": "2017-03-23T14:58:38Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/288746294",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8304462?v=4",
                "events_url": "https://api.github.com/users/robinlinden/events{/privacy}",
                "followers_url": "https://api.github.com/users/robinlinden/followers",
                "following_url": "https://api.github.com/users/robinlinden/following{/other_user}",
                "gists_url": "https://api.github.com/users/robinlinden/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robinlinden",
                "id": 8304462,
                "login": "robinlinden",
                "node_id": "MDQ6VXNlcjgzMDQ0NjI=",
                "organizations_url": "https://api.github.com/users/robinlinden/orgs",
                "received_events_url": "https://api.github.com/users/robinlinden/received_events",
                "repos_url": "https://api.github.com/users/robinlinden/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robinlinden/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robinlinden/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robinlinden",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Is the \"close list\" equivalent of the k-bucket list in Kademlia? If so, the behaviour you are complaining about might actually be the desired behaviour and you fixing it would make DHT less reliable. In Kademlia, each k-bucket contains at most k nodes and is sorted by the most recently seen time. You update the k-bucket list every time you receive any DHT reply from any node, putting that node on the top (or bottom, depends on how you implemented it) of the list, since it's the most recently seen node in that bucket. Of course, if the node is already somewhere in the k-bucket, you remove it before adoing it to the top, as you don't want duplicates in the k-bucket. The property of k-buckets being always sorted by the most recently seen time is key to Kademlia DHT's reliability, because once a k-bucket is full and you add a new node to it, the least recently seen node is removed from the k-bucket, i.e. the bottom most node is removed. This makes it so that k-bucket contains k nodes which are very likely to be online. If you change the code in such a way that you don't put a recently seen node at the top of the k-bucket if it's already in it, you violate the property of the k-bucket being sorted by the most recently seen time, which allows for the exact opposite behaviour to happen -- the bottom most node might in fact be one of the most recently seen nodes, which should be on the top of the k-bucket instead, and since the bottom most node is removed when you try to insert a new node in a full k-bucket, because the algorithm assumes that the bottom most node is the least recently seen node, it would unknowingly remove the most recently node.\r\n\r\nThat said, I'm only familiar with Kademlia DHT, not Tox DHT, but Tox DHT is supposedly based on Kademlia DHT so this is likely to still apply.",
            "created_at": "2017-03-23T16:47:04Z",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/511#issuecomment-288783632",
            "id": 288783632,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODc4MzYzMg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/288783632/reactions"
            },
            "updated_at": "2017-03-23T16:47:04Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/288783632",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1855294?v=4",
                "events_url": "https://api.github.com/users/nurupo/events{/privacy}",
                "followers_url": "https://api.github.com/users/nurupo/followers",
                "following_url": "https://api.github.com/users/nurupo/following{/other_user}",
                "gists_url": "https://api.github.com/users/nurupo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/nurupo",
                "id": 1855294,
                "login": "nurupo",
                "node_id": "MDQ6VXNlcjE4NTUyOTQ=",
                "organizations_url": "https://api.github.com/users/nurupo/orgs",
                "received_events_url": "https://api.github.com/users/nurupo/received_events",
                "repos_url": "https://api.github.com/users/nurupo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/nurupo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/nurupo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/nurupo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "* Thursday, 2017-03-23 at 07:58 -0700 - Robin Lindén <notifications@github.com>:\n\n> Reviewed 1 of 1 files at r1.\n> Review status: all files reviewed at latest revision, 1 unresolved discussion, some commit checks failed.\n> \n> ---\n> \n> *[toxcore/DHT.c, line 1025 at r1](https://reviewable.io:443/reviews/toktok/c-toxcore/511#-Kfveq4VV6Tj0gSbGrLa:-Kfveq4VV6Tj0gSbGrLb:b42aezb) ([raw file](https://github.com/toktok/c-toxcore/blob/2f172769d11b03488ea278dc34c0c421b211b759/toxcore/DHT.c#L1025)):*\n> > ```C\n> > \n> >     if (index > LCLIENT_LENGTH) {\n> >         index = LCLIENT_LENGTH - 1;\n> > ```\n> \n> So `LCLIENT_LENGTH` is okay, but you set index to `LCLIENT_LENGTH - 1`? Did you mean to use `>=` in the if-check or is this all intentional?\n\nGood catch!\n\nI copied this from add_to_close(), but indeed it should be '>=' both\nthere and here, because in neither case is index=LCLIENT_LENGTH a good\nidea.\n\nFixed in both functions.\n",
            "created_at": "2017-03-23T18:00:26Z",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/511#issuecomment-288808796",
            "id": 288808796,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODgwODc5Ng==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/288808796/reactions"
            },
            "updated_at": "2017-03-23T18:00:26Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/288808796",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/590069?v=4",
                "events_url": "https://api.github.com/users/zugz/events{/privacy}",
                "followers_url": "https://api.github.com/users/zugz/followers",
                "following_url": "https://api.github.com/users/zugz/following{/other_user}",
                "gists_url": "https://api.github.com/users/zugz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zugz",
                "id": 590069,
                "login": "zugz",
                "node_id": "MDQ6VXNlcjU5MDA2OQ==",
                "organizations_url": "https://api.github.com/users/zugz/orgs",
                "received_events_url": "https://api.github.com/users/zugz/received_events",
                "repos_url": "https://api.github.com/users/zugz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zugz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zugz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zugz",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "* Thursday, 2017-03-23 at 09:47 -0700 - nurupo <notifications@github.com>:\n\n> Is the \"close list\" equivalent of the k-bucket list in Kademlia?\n\nYes.\n\n> If so, the behaviour you are complaining about might actually be the\n> desired behaviour and you fixing it would make DHT less reliable. In\n> Kademlia, each k-bucket contains at most k nodes and is sorted by the\n> most recently seen time.\n\nTox doesn't order the buckets at all. Instead, it \"pings\" every node in\neach bucket every 60 seconds by sending it a getnodes request, and if\nthe node replies a timestamp on the node is updated. If a node fails to\nreply to requests for long enough (122s) it's marked as \"bad\", which\neffectively means it's removed from the bucket.\n\nThe PR doesn't interfere with this \"pinging\".\n\nThis frequent \"pinging\" is expensive, so it might well be that in the\nfuture we want to move to something more like the Kademlia system. So it\nmight be worth thinking through how this PR would affect such a system:\n\n> You update the k-bucket list every time you receive any DHT reply from\n> any node, putting that node on the top (or bottom, depends on how you\n> implemented it) of the list, since it's the most recently seen node in\n> that bucket. Of course, if the node is already somewhere in the\n> k-bucket, you remove it before adoing it to the top, as you don't want\n> duplicates in the k-bucket.\n\nThis PR is not changing that. When we receive a reply to a getnodes\nrequest, we update the node we got the reply from; this PR doesn't\naffect that. What it affects is what we do with the nodes the reply\ntells us about. Currently we immediately send a getnodes request to\neach of those nodes, searching for ourself, unless the corresponding\nbucket is full; this PR prevents sending such a request when the node is\nalready in the bucket.\n\nThe only possible interaction with a least-recently-seen policy is that\nthis the current behaviour would prompt nodes which show up in\na getnodes response to declare that they're still alive. But given the\npathological behaviour I described in the original PR text, I don't\nthink this can be a good method for doing that. The Kademlia paper\ndescribes an entirely different method for refreshing buckets when usual\ntraffic isn't enough, by doing a search for a random ID in the bucket's\nrange.\n",
            "created_at": "2017-03-23T18:41:12Z",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/511#issuecomment-288821522",
            "id": 288821522,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODgyMTUyMg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/288821522/reactions"
            },
            "updated_at": "2017-03-23T18:41:12Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/288821522",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/590069?v=4",
                "events_url": "https://api.github.com/users/zugz/events{/privacy}",
                "followers_url": "https://api.github.com/users/zugz/followers",
                "following_url": "https://api.github.com/users/zugz/following{/other_user}",
                "gists_url": "https://api.github.com/users/zugz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zugz",
                "id": 590069,
                "login": "zugz",
                "node_id": "MDQ6VXNlcjU5MDA2OQ==",
                "organizations_url": "https://api.github.com/users/zugz/orgs",
                "received_events_url": "https://api.github.com/users/zugz/received_events",
                "repos_url": "https://api.github.com/users/zugz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zugz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zugz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zugz",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "<img class=\"emoji\" title=\":lgtm_strong:\" alt=\":lgtm_strong:\" align=\"absmiddle\" src=\"https://reviewable.io/lgtm_strong.png\" height=\"20\" width=\"61\"/>\n\n---\n\nReviewed 1 of 1 files at r2.\nReview status: all files reviewed at latest revision, all discussions resolved, some commit checks failed.\n\n---\n\n\n\n*Comments from [Reviewable](https://reviewable.io:443/reviews/toktok/c-toxcore/511#-:-Kg5_WxkXjnN4M6-3snU:b-jbsf8z)*\n<!-- Sent from Reviewable.io -->\n",
            "created_at": "2017-03-25T17:49:41Z",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/511#issuecomment-289227835",
            "id": 289227835,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTIyNzgzNQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/289227835/reactions"
            },
            "updated_at": "2017-03-25T17:49:41Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/289227835",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8304462?v=4",
                "events_url": "https://api.github.com/users/robinlinden/events{/privacy}",
                "followers_url": "https://api.github.com/users/robinlinden/followers",
                "following_url": "https://api.github.com/users/robinlinden/following{/other_user}",
                "gists_url": "https://api.github.com/users/robinlinden/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robinlinden",
                "id": 8304462,
                "login": "robinlinden",
                "node_id": "MDQ6VXNlcjgzMDQ0NjI=",
                "organizations_url": "https://api.github.com/users/robinlinden/orgs",
                "received_events_url": "https://api.github.com/users/robinlinden/received_events",
                "repos_url": "https://api.github.com/users/robinlinden/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robinlinden/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robinlinden/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robinlinden",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Please enable the checkbox \"Allow edits from maintainers.\" on the bottom right.",
            "created_at": "2017-03-26T19:34:38Z",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/511#issuecomment-289308781",
            "id": 289308781,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTMwODc4MQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/289308781/reactions"
            },
            "updated_at": "2017-03-26T19:34:38Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/289308781",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@nurupo are you happy with this PR?",
            "created_at": "2017-04-01T12:38:09Z",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/511#issuecomment-290917629",
            "id": 290917629,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDkxNzYyOQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/290917629/reactions"
            },
            "updated_at": "2017-04-01T12:38:09Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/290917629",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "let me take a look too",
            "created_at": "2017-04-07T19:42:07Z",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/511#issuecomment-292633324",
            "id": 292633324,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjYzMzMyNA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/292633324/reactions"
            },
            "updated_at": "2017-04-07T19:42:07Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/292633324",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/243408?v=4",
                "events_url": "https://api.github.com/users/GrayHatter/events{/privacy}",
                "followers_url": "https://api.github.com/users/GrayHatter/followers",
                "following_url": "https://api.github.com/users/GrayHatter/following{/other_user}",
                "gists_url": "https://api.github.com/users/GrayHatter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/GrayHatter",
                "id": 243408,
                "login": "GrayHatter",
                "node_id": "MDQ6VXNlcjI0MzQwOA==",
                "organizations_url": "https://api.github.com/users/GrayHatter/orgs",
                "received_events_url": "https://api.github.com/users/GrayHatter/received_events",
                "repos_url": "https://api.github.com/users/GrayHatter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/GrayHatter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/GrayHatter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/GrayHatter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> I did some primitive testing, and I'm sad to say that this patch doesn't seem to lead to any immediately discernable reduction in bandwidth. Whether this is because the scenario I sketched isn't actually occuring, or just because it's being drowned out by all the other sources of bandwidth use, I don't know.\n\n@jfreegman has a feature branch with a packet count/size, did you, or can you use that to see if it's changing the packet counts in other ways?\n\n---\n\nReview status: 0 of 1 files reviewed at latest revision, all discussions resolved, all commit checks successful.\n\n---\n\n\n\n*Comments from [Reviewable](https://reviewable.io:443/reviews/toktok/c-toxcore/511#-:-KhB3gjou7ZSS2jyObzo:b-hq3z4s)*\n<!-- Sent from Reviewable.io -->\n",
            "created_at": "2017-04-08T05:40:11Z",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/511#issuecomment-292696876",
            "id": 292696876,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjY5Njg3Ng==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/292696876/reactions"
            },
            "updated_at": "2017-04-08T05:40:11Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/292696876",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/243408?v=4",
                "events_url": "https://api.github.com/users/GrayHatter/events{/privacy}",
                "followers_url": "https://api.github.com/users/GrayHatter/followers",
                "following_url": "https://api.github.com/users/GrayHatter/following{/other_user}",
                "gists_url": "https://api.github.com/users/GrayHatter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/GrayHatter",
                "id": 243408,
                "login": "GrayHatter",
                "node_id": "MDQ6VXNlcjI0MzQwOA==",
                "organizations_url": "https://api.github.com/users/GrayHatter/orgs",
                "received_events_url": "https://api.github.com/users/GrayHatter/received_events",
                "repos_url": "https://api.github.com/users/GrayHatter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/GrayHatter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/GrayHatter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/GrayHatter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> That said, I'm only familiar with Kademlia DHT, not Tox DHT, but Tox DHT is supposedly based on Kademlia DHT so this is likely to still apply.\n\nFrom my understanding that's not how Tox sorts it's close list. Unless I misunderstand something. ONLY replaces nodes that have timed out.\n\n---\n\n\n\n\n\n\n\n*Comments from [Reviewable](https://reviewable.io:443/reviews/toktok/c-toxcore/511#-:-KhB4Cl1jnC5VqnsbqkX:b-4hg163)*\n<!-- Sent from Reviewable.io -->\n",
            "created_at": "2017-04-08T06:06:04Z",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/511#issuecomment-292697818",
            "id": 292697818,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjY5NzgxOA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/292697818/reactions"
            },
            "updated_at": "2017-04-08T06:06:04Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/292697818",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/243408?v=4",
                "events_url": "https://api.github.com/users/GrayHatter/events{/privacy}",
                "followers_url": "https://api.github.com/users/GrayHatter/followers",
                "following_url": "https://api.github.com/users/GrayHatter/following{/other_user}",
                "gists_url": "https://api.github.com/users/GrayHatter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/GrayHatter",
                "id": 243408,
                "login": "GrayHatter",
                "node_id": "MDQ6VXNlcjI0MzQwOA==",
                "organizations_url": "https://api.github.com/users/GrayHatter/orgs",
                "received_events_url": "https://api.github.com/users/GrayHatter/received_events",
                "repos_url": "https://api.github.com/users/GrayHatter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/GrayHatter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/GrayHatter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/GrayHatter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "<img class=\"emoji\" title=\":lgtm:\" alt=\":lgtm:\" align=\"absmiddle\" src=\"https://reviewable.io/lgtm.png\" height=\"20\" width=\"61\"/> afaict, @zugz is correct about everything.  All this pull does is prevent the DHT from adding nodes that exist in the close list to the to_bootstrap list. Which IIRC would only then attempt to add them to the close list.\n\nIf they're already in the close list, we honestly don't need to interact with them at all*, assuming other nodes closer send us a get nodes request, we don't need to ask them for close nodes anymore*.\n\n*many restrictions apply, and I'm not advocating we actually do this.\n\n---\n\nReview status: 0 of 1 files reviewed at latest revision, all discussions resolved, all commit checks successful.\n\n---\n\n\n\n*Comments from [Reviewable](https://reviewable.io:443/reviews/toktok/c-toxcore/511#-:-KhBAFJlTQSa5Y2ydSdJ:b-g06fg3)*\n<!-- Sent from Reviewable.io -->\n",
            "created_at": "2017-04-08T06:12:52Z",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/511#issuecomment-292698045",
            "id": 292698045,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5MjY5ODA0NQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/292698045/reactions"
            },
            "updated_at": "2017-04-08T06:12:52Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/292698045",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/243408?v=4",
                "events_url": "https://api.github.com/users/GrayHatter/events{/privacy}",
                "followers_url": "https://api.github.com/users/GrayHatter/followers",
                "following_url": "https://api.github.com/users/GrayHatter/following{/other_user}",
                "gists_url": "https://api.github.com/users/GrayHatter/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/GrayHatter",
                "id": 243408,
                "login": "GrayHatter",
                "node_id": "MDQ6VXNlcjI0MzQwOA==",
                "organizations_url": "https://api.github.com/users/GrayHatter/orgs",
                "received_events_url": "https://api.github.com/users/GrayHatter/received_events",
                "repos_url": "https://api.github.com/users/GrayHatter/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/GrayHatter/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/GrayHatter/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/GrayHatter",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@irungentoo would you like to take a look at this to make sure it makes sense?",
            "created_at": "2017-04-09T11:35:26Z",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/511#issuecomment-292780391",
            "id": 292780391,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5Mjc4MDM5MQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/292780391/reactions"
            },
            "updated_at": "2017-04-09T11:35:26Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/292780391",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "This looks fine.",
            "created_at": "2017-04-10T14:56:08Z",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/511#issuecomment-292974877",
            "id": 292974877,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5Mjk3NDg3Nw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/292974877/reactions"
            },
            "updated_at": "2017-04-10T14:56:08Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/292974877",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2226611?v=4",
                "events_url": "https://api.github.com/users/irungentoo/events{/privacy}",
                "followers_url": "https://api.github.com/users/irungentoo/followers",
                "following_url": "https://api.github.com/users/irungentoo/following{/other_user}",
                "gists_url": "https://api.github.com/users/irungentoo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/irungentoo",
                "id": 2226611,
                "login": "irungentoo",
                "node_id": "MDQ6VXNlcjIyMjY2MTE=",
                "organizations_url": "https://api.github.com/users/irungentoo/orgs",
                "received_events_url": "https://api.github.com/users/irungentoo/received_events",
                "repos_url": "https://api.github.com/users/irungentoo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/irungentoo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/irungentoo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/irungentoo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I did a little imprecise testing, and I'm observing roughly a quartering of\r\nthe number of getnodes requests sent during normal DHT operation once this\r\npatch is applied (from about 8 per second to about 2). So this should indeed\r\nhelp with our bandwidth problem.\r\n",
            "created_at": "2017-04-28T19:05:57Z",
            "html_url": "https://github.com/TokTok/c-toxcore/pull/511#issuecomment-298081720",
            "id": 298081720,
            "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODA4MTcyMA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/298081720/reactions"
            },
            "updated_at": "2017-04-28T19:05:57Z",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/issues/comments/298081720",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/590069?v=4",
                "events_url": "https://api.github.com/users/zugz/events{/privacy}",
                "followers_url": "https://api.github.com/users/zugz/followers",
                "following_url": "https://api.github.com/users/zugz/following{/other_user}",
                "gists_url": "https://api.github.com/users/zugz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zugz",
                "id": 590069,
                "login": "zugz",
                "node_id": "MDQ6VXNlcjU5MDA2OQ==",
                "organizations_url": "https://api.github.com/users/zugz/orgs",
                "received_events_url": "https://api.github.com/users/zugz/received_events",
                "repos_url": "https://api.github.com/users/zugz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zugz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zugz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zugz",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 15,
    "comments_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511/comments",
    "commit_data": [
        {
            "author": {
                "avatar_url": "https://avatars.githubusercontent.com/u/590069?v=4",
                "events_url": "https://api.github.com/users/zugz/events{/privacy}",
                "followers_url": "https://api.github.com/users/zugz/followers",
                "following_url": "https://api.github.com/users/zugz/following{/other_user}",
                "gists_url": "https://api.github.com/users/zugz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zugz",
                "id": 590069,
                "login": "zugz",
                "node_id": "MDQ6VXNlcjU5MDA2OQ==",
                "organizations_url": "https://api.github.com/users/zugz/orgs",
                "received_events_url": "https://api.github.com/users/zugz/received_events",
                "repos_url": "https://api.github.com/users/zugz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zugz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zugz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zugz",
                "user_view_type": "public"
            },
            "comments_url": "https://api.github.com/repos/TokTok/c-toxcore/commits/2474f43087f67cd9ac993a7ef78bfd81e2b083d7/comments",
            "commit": {
                "author": {
                    "date": "2017-03-12T10:09:24Z",
                    "email": "mbays+tox@sdf.org",
                    "name": "zugz"
                },
                "comment_count": 0,
                "committer": {
                    "date": "2017-04-29T16:28:28Z",
                    "email": "dev@robinlinden.eu",
                    "name": "Robin Lindén"
                },
                "message": "check if already in close list in ping_node_from_getnodes_ok()\n\nfix index bounds check in add_to_close() and is_pk_in_close_list()\n\nadd TODO to write test for bug which fixed by this commit",
                "tree": {
                    "sha": "513804970ac5cd391dc2e560aca2f865d61dd0d3",
                    "url": "https://api.github.com/repos/TokTok/c-toxcore/git/trees/513804970ac5cd391dc2e560aca2f865d61dd0d3"
                },
                "url": "https://api.github.com/repos/TokTok/c-toxcore/git/commits/2474f43087f67cd9ac993a7ef78bfd81e2b083d7",
                "verification": {
                    "payload": "tree 513804970ac5cd391dc2e560aca2f865d61dd0d3\nparent f6db9333e2d1262e7ba3846563c30f63c98ffa38\nauthor zugz <mbays+tox@sdf.org> 1489313364 +0100\ncommitter Robin Lindén <dev@robinlinden.eu> 1493483308 +0200\n\ncheck if already in close list in ping_node_from_getnodes_ok()\n\nfix index bounds check in add_to_close() and is_pk_in_close_list()\n\nadd TODO to write test for bug which fixed by this commit\n",
                    "reason": "valid",
                    "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2\n\niQIcBAABCAAGBQJZBL85AAoJEGAaYEt+YFd29qQQAKKd5pXHqYo0SgK8aL8MyMpx\nnj+x15qOolYKXdRHNb7oxd970sV7eB1PtruZ+TD2vWJmlvBqeE51onPoQk2nvyYT\nbmozhIr/uiVxS43V5DJ2SXKA3b1i5YXnBTbzEC/U5d8uSiGPVL3yCCq/3/8JfDFS\nIhqIWrtqPhfzDyrBWM1zQ0HsomO0kgm91bMNYBL9GhmUIF2viN68qbT0mYZ/RviI\nDYruQRcSm5Atz6tklg9s8NUEzfuGcPt2/oBby+EX+l478gU6MXWeCwIPhlWFoB6K\nuR1CyGGpD/b7N+S8Hcj2bJDeqAL6DZ0XgWHqr221eDOC1G5DK32hPhMYP2QtRftQ\n0g6GH0KxkkZQJtIpA5Hd3Vwb6RN53z6G9jSA0jQovbwnpohJMmCHvTi/Y3Y79vgs\nHEXmtNSxGxHALol/NDKvMsfWFv4l0osIWzIVSeJqXHlTEEYo3UK+f48Bh611E+ux\nT2fwY7eLyBqiFAKqJA/1SoUUX/7Fi+ZwqxJcibzbEf23c5/637NdkdNiGaZUk29d\nUkhih6CJnnGhMOdyMQJBEN4GrO8WrDmInQXKdYysa0SIVFNUlqqv6lv9B5CSdPh4\nOMbbY0ad+BSA56Vd21EiRiqH0iUn7K13qFBsEyQ4sNmR764Vy7IQxZ0VXFwXlxxp\negf2lqLPEGjH9X+9JJ9h\n=2njI\n-----END PGP SIGNATURE-----",
                    "verified": true,
                    "verified_at": "2024-11-07T17:54:58Z"
                }
            },
            "committer": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8304462?v=4",
                "events_url": "https://api.github.com/users/robinlinden/events{/privacy}",
                "followers_url": "https://api.github.com/users/robinlinden/followers",
                "following_url": "https://api.github.com/users/robinlinden/following{/other_user}",
                "gists_url": "https://api.github.com/users/robinlinden/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robinlinden",
                "id": 8304462,
                "login": "robinlinden",
                "node_id": "MDQ6VXNlcjgzMDQ0NjI=",
                "organizations_url": "https://api.github.com/users/robinlinden/orgs",
                "received_events_url": "https://api.github.com/users/robinlinden/received_events",
                "repos_url": "https://api.github.com/users/robinlinden/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robinlinden/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robinlinden/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robinlinden",
                "user_view_type": "public"
            },
            "html_url": "https://github.com/TokTok/c-toxcore/commit/2474f43087f67cd9ac993a7ef78bfd81e2b083d7",
            "node_id": "MDY6Q29tbWl0Nzg5NTcyODg6MjQ3NGY0MzA4N2Y2N2NkOWFjOTkzYTdlZjc4YmZkODFlMmIwODNkNw==",
            "parents": [
                {
                    "html_url": "https://github.com/TokTok/c-toxcore/commit/f6db9333e2d1262e7ba3846563c30f63c98ffa38",
                    "sha": "f6db9333e2d1262e7ba3846563c30f63c98ffa38",
                    "url": "https://api.github.com/repos/TokTok/c-toxcore/commits/f6db9333e2d1262e7ba3846563c30f63c98ffa38"
                }
            ],
            "sha": "2474f43087f67cd9ac993a7ef78bfd81e2b083d7",
            "url": "https://api.github.com/repos/TokTok/c-toxcore/commits/2474f43087f67cd9ac993a7ef78bfd81e2b083d7"
        }
    ],
    "commits": 1,
    "commits_url": "https://api.github.com/repos/TokTok/c-toxcore/pulls/511/commits",
    "created_at": "2017-03-12T11:50:08Z",
    "deletions": 2,
    "diff_url": "https://github.com/TokTok/c-toxcore/pull/511.diff",
    "draft": false,
    "head": {
        "label": "zugz:checkInCloselist",
        "ref": "checkInCloselist",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/zugz/c-toxcore/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/zugz/c-toxcore/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/zugz/c-toxcore/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/zugz/c-toxcore/branches{/branch}",
            "clone_url": "https://github.com/zugz/c-toxcore.git",
            "collaborators_url": "https://api.github.com/repos/zugz/c-toxcore/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/zugz/c-toxcore/comments{/number}",
            "commits_url": "https://api.github.com/repos/zugz/c-toxcore/commits{/sha}",
            "compare_url": "https://api.github.com/repos/zugz/c-toxcore/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/zugz/c-toxcore/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/zugz/c-toxcore/contributors",
            "created_at": "2017-01-14T18:08:35Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/zugz/c-toxcore/deployments",
            "description": "The future of online communications.",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/zugz/c-toxcore/downloads",
            "events_url": "https://api.github.com/repos/zugz/c-toxcore/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/zugz/c-toxcore/forks",
            "full_name": "zugz/c-toxcore",
            "git_commits_url": "https://api.github.com/repos/zugz/c-toxcore/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/zugz/c-toxcore/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/zugz/c-toxcore/git/tags{/sha}",
            "git_url": "git://github.com/zugz/c-toxcore.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": false,
            "homepage": "https://tox.chat/",
            "hooks_url": "https://api.github.com/repos/zugz/c-toxcore/hooks",
            "html_url": "https://github.com/zugz/c-toxcore",
            "id": 78957288,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/zugz/c-toxcore/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/zugz/c-toxcore/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/zugz/c-toxcore/issues{/number}",
            "keys_url": "https://api.github.com/repos/zugz/c-toxcore/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/zugz/c-toxcore/labels{/name}",
            "language": "C",
            "languages_url": "https://api.github.com/repos/zugz/c-toxcore/languages",
            "license": {
                "key": "gpl-3.0",
                "name": "GNU General Public License v3.0",
                "node_id": "MDc6TGljZW5zZTk=",
                "spdx_id": "GPL-3.0",
                "url": "https://api.github.com/licenses/gpl-3.0"
            },
            "merges_url": "https://api.github.com/repos/zugz/c-toxcore/merges",
            "milestones_url": "https://api.github.com/repos/zugz/c-toxcore/milestones{/number}",
            "mirror_url": null,
            "name": "c-toxcore",
            "node_id": "MDEwOlJlcG9zaXRvcnk3ODk1NzI4OA==",
            "notifications_url": "https://api.github.com/repos/zugz/c-toxcore/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/590069?v=4",
                "events_url": "https://api.github.com/users/zugz/events{/privacy}",
                "followers_url": "https://api.github.com/users/zugz/followers",
                "following_url": "https://api.github.com/users/zugz/following{/other_user}",
                "gists_url": "https://api.github.com/users/zugz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zugz",
                "id": 590069,
                "login": "zugz",
                "node_id": "MDQ6VXNlcjU5MDA2OQ==",
                "organizations_url": "https://api.github.com/users/zugz/orgs",
                "received_events_url": "https://api.github.com/users/zugz/received_events",
                "repos_url": "https://api.github.com/users/zugz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zugz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zugz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zugz",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/zugz/c-toxcore/pulls{/number}",
            "pushed_at": "2022-07-10T15:28:21Z",
            "releases_url": "https://api.github.com/repos/zugz/c-toxcore/releases{/id}",
            "size": 16881,
            "ssh_url": "git@github.com:zugz/c-toxcore.git",
            "stargazers_count": 1,
            "stargazers_url": "https://api.github.com/repos/zugz/c-toxcore/stargazers",
            "statuses_url": "https://api.github.com/repos/zugz/c-toxcore/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/zugz/c-toxcore/subscribers",
            "subscription_url": "https://api.github.com/repos/zugz/c-toxcore/subscription",
            "svn_url": "https://github.com/zugz/c-toxcore",
            "tags_url": "https://api.github.com/repos/zugz/c-toxcore/tags",
            "teams_url": "https://api.github.com/repos/zugz/c-toxcore/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/zugz/c-toxcore/git/trees{/sha}",
            "updated_at": "2020-04-26T16:00:08Z",
            "url": "https://api.github.com/repos/zugz/c-toxcore",
            "visibility": "public",
            "watchers": 1,
            "watchers_count": 1,
            "web_commit_signoff_required": false
        },
        "sha": "2474f43087f67cd9ac993a7ef78bfd81e2b083d7",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/590069?v=4",
            "events_url": "https://api.github.com/users/zugz/events{/privacy}",
            "followers_url": "https://api.github.com/users/zugz/followers",
            "following_url": "https://api.github.com/users/zugz/following{/other_user}",
            "gists_url": "https://api.github.com/users/zugz/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/zugz",
            "id": 590069,
            "login": "zugz",
            "node_id": "MDQ6VXNlcjU5MDA2OQ==",
            "organizations_url": "https://api.github.com/users/zugz/orgs",
            "received_events_url": "https://api.github.com/users/zugz/received_events",
            "repos_url": "https://api.github.com/users/zugz/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/zugz/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zugz/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/zugz",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/TokTok/c-toxcore/pull/511",
    "id": 110295883,
    "issue_url": "https://api.github.com/repos/TokTok/c-toxcore/issues/511",
    "labels": [],
    "locked": false,
    "maintainer_can_modify": false,
    "merge_commit_sha": "2474f43087f67cd9ac993a7ef78bfd81e2b083d7",
    "mergeable": null,
    "mergeable_state": "unknown",
    "merged": true,
    "merged_at": "2017-04-29T17:02:06Z",
    "merged_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8304462?v=4",
        "events_url": "https://api.github.com/users/robinlinden/events{/privacy}",
        "followers_url": "https://api.github.com/users/robinlinden/followers",
        "following_url": "https://api.github.com/users/robinlinden/following{/other_user}",
        "gists_url": "https://api.github.com/users/robinlinden/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/robinlinden",
        "id": 8304462,
        "login": "robinlinden",
        "node_id": "MDQ6VXNlcjgzMDQ0NjI=",
        "organizations_url": "https://api.github.com/users/robinlinden/orgs",
        "received_events_url": "https://api.github.com/users/robinlinden/received_events",
        "repos_url": "https://api.github.com/users/robinlinden/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/robinlinden/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/robinlinden/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/robinlinden",
        "user_view_type": "public"
    },
    "milestone": {
        "closed_at": "2017-06-06T22:17:51Z",
        "closed_issues": 23,
        "created_at": "2017-03-26T13:40:32Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
            "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
            "followers_url": "https://api.github.com/users/iphydf/followers",
            "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
            "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/iphydf",
            "id": 10647936,
            "login": "iphydf",
            "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
            "organizations_url": "https://api.github.com/users/iphydf/orgs",
            "received_events_url": "https://api.github.com/users/iphydf/received_events",
            "repos_url": "https://api.github.com/users/iphydf/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/iphydf",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": "2017-06-07T07:00:00Z",
        "html_url": "https://github.com/TokTok/c-toxcore/milestone/23",
        "id": 2411592,
        "labels_url": "https://api.github.com/repos/TokTok/c-toxcore/milestones/23/labels",
        "node_id": "MDk6TWlsZXN0b25lMjQxMTU5Mg==",
        "number": 23,
        "open_issues": 0,
        "state": "closed",
        "title": "v0.1.9",
        "updated_at": "2017-06-06T22:17:51Z",
        "url": "https://api.github.com/repos/TokTok/c-toxcore/milestones/23"
    },
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTEwMjk1ODgz",
    "number": 511,
    "patch_url": "https://github.com/TokTok/c-toxcore/pull/511.patch",
    "rebaseable": null,
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/TokTok/c-toxcore/pulls/comments{/number}",
    "review_comments": 0,
    "review_comments_url": "https://api.github.com/repos/TokTok/c-toxcore/pulls/511/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/TokTok/c-toxcore/statuses/2474f43087f67cd9ac993a7ef78bfd81e2b083d7",
    "title": "Save bandwidth by avoiding superfluous Nodes Requests to peers already on the Close List",
    "updated_at": "2017-04-29T17:02:06Z",
    "url": "https://api.github.com/repos/TokTok/c-toxcore/pulls/511",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/590069?v=4",
        "events_url": "https://api.github.com/users/zugz/events{/privacy}",
        "followers_url": "https://api.github.com/users/zugz/followers",
        "following_url": "https://api.github.com/users/zugz/following{/other_user}",
        "gists_url": "https://api.github.com/users/zugz/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/zugz",
        "id": 590069,
        "login": "zugz",
        "node_id": "MDQ6VXNlcjU5MDA2OQ==",
        "organizations_url": "https://api.github.com/users/zugz/orgs",
        "received_events_url": "https://api.github.com/users/zugz/received_events",
        "repos_url": "https://api.github.com/users/zugz/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/zugz/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zugz/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/zugz",
        "user_view_type": "public"
    }
}