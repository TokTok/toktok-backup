{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/TokTok/website/issues/83/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/TokTok/website/pulls/83/commits"
        },
        "html": {
            "href": "https://github.com/TokTok/website/pull/83"
        },
        "issue": {
            "href": "https://api.github.com/repos/TokTok/website/issues/83"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/TokTok/website/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/TokTok/website/pulls/83/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/TokTok/website/pulls/83"
        },
        "statuses": {
            "href": "https://api.github.com/repos/TokTok/website/statuses/95faac70af688a481b0963388be69b2787311738"
        }
    },
    "active_lock_reason": null,
    "additions": 166,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "auto_merge": null,
    "base": {
        "label": "TokTok:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/TokTok/website/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/TokTok/website/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/TokTok/website/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/TokTok/website/branches{/branch}",
            "clone_url": "https://github.com/TokTok/website.git",
            "collaborators_url": "https://api.github.com/repos/TokTok/website/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/TokTok/website/comments{/number}",
            "commits_url": "https://api.github.com/repos/TokTok/website/commits{/sha}",
            "compare_url": "https://api.github.com/repos/TokTok/website/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/TokTok/website/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/TokTok/website/contributors",
            "created_at": "2017-01-07T03:20:26Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/TokTok/website/deployments",
            "description": "The TokTok website",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/TokTok/website/downloads",
            "events_url": "https://api.github.com/repos/TokTok/website/events",
            "fork": false,
            "forks": 55,
            "forks_count": 55,
            "forks_url": "https://api.github.com/repos/TokTok/website/forks",
            "full_name": "TokTok/website",
            "git_commits_url": "https://api.github.com/repos/TokTok/website/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/TokTok/website/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/TokTok/website/git/tags{/sha}",
            "git_url": "git://github.com/TokTok/website.git",
            "has_discussions": false,
            "has_downloads": false,
            "has_issues": true,
            "has_pages": false,
            "has_projects": false,
            "has_wiki": false,
            "homepage": "https://toktok.ltd/",
            "hooks_url": "https://api.github.com/repos/TokTok/website/hooks",
            "html_url": "https://github.com/TokTok/website",
            "id": 78255769,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/TokTok/website/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/TokTok/website/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/TokTok/website/issues{/number}",
            "keys_url": "https://api.github.com/repos/TokTok/website/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/TokTok/website/labels{/name}",
            "language": "CSS",
            "languages_url": "https://api.github.com/repos/TokTok/website/languages",
            "license": {
                "key": "gpl-3.0",
                "name": "GNU General Public License v3.0",
                "node_id": "MDc6TGljZW5zZTk=",
                "spdx_id": "GPL-3.0",
                "url": "https://api.github.com/licenses/gpl-3.0"
            },
            "merges_url": "https://api.github.com/repos/TokTok/website/merges",
            "milestones_url": "https://api.github.com/repos/TokTok/website/milestones{/number}",
            "mirror_url": null,
            "name": "website",
            "node_id": "MDEwOlJlcG9zaXRvcnk3ODI1NTc2OQ==",
            "notifications_url": "https://api.github.com/repos/TokTok/website/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/17427091?v=4",
                "events_url": "https://api.github.com/users/TokTok/events{/privacy}",
                "followers_url": "https://api.github.com/users/TokTok/followers",
                "following_url": "https://api.github.com/users/TokTok/following{/other_user}",
                "gists_url": "https://api.github.com/users/TokTok/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/TokTok",
                "id": 17427091,
                "login": "TokTok",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjE3NDI3MDkx",
                "organizations_url": "https://api.github.com/users/TokTok/orgs",
                "received_events_url": "https://api.github.com/users/TokTok/received_events",
                "repos_url": "https://api.github.com/users/TokTok/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/TokTok/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/TokTok/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/TokTok",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/TokTok/website/pulls{/number}",
            "pushed_at": "2025-01-22T17:02:05Z",
            "releases_url": "https://api.github.com/repos/TokTok/website/releases{/id}",
            "size": 19449,
            "ssh_url": "git@github.com:TokTok/website.git",
            "stargazers_count": 11,
            "stargazers_url": "https://api.github.com/repos/TokTok/website/stargazers",
            "statuses_url": "https://api.github.com/repos/TokTok/website/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/TokTok/website/subscribers",
            "subscription_url": "https://api.github.com/repos/TokTok/website/subscription",
            "svn_url": "https://github.com/TokTok/website",
            "tags_url": "https://api.github.com/repos/TokTok/website/tags",
            "teams_url": "https://api.github.com/repos/TokTok/website/teams",
            "topics": [
                "toktok",
                "tox"
            ],
            "trees_url": "https://api.github.com/repos/TokTok/website/git/trees{/sha}",
            "updated_at": "2024-11-21T03:23:01Z",
            "url": "https://api.github.com/repos/TokTok/website",
            "visibility": "public",
            "watchers": 11,
            "watchers_count": 11,
            "web_commit_signoff_required": false
        },
        "sha": "7b93c804a7ec90921782df678c8d9637c3589d15",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/17427091?v=4",
            "events_url": "https://api.github.com/users/TokTok/events{/privacy}",
            "followers_url": "https://api.github.com/users/TokTok/followers",
            "following_url": "https://api.github.com/users/TokTok/following{/other_user}",
            "gists_url": "https://api.github.com/users/TokTok/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/TokTok",
            "id": 17427091,
            "login": "TokTok",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjE3NDI3MDkx",
            "organizations_url": "https://api.github.com/users/TokTok/orgs",
            "received_events_url": "https://api.github.com/users/TokTok/received_events",
            "repos_url": "https://api.github.com/users/TokTok/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/TokTok/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TokTok/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/TokTok",
            "user_view_type": "public"
        }
    },
    "body": "\n\n<!-- Reviewable:start -->\nThis change isâ€‚[<img src=\"https://reviewable.io/review_button.svg\" height=\"34\" align=\"absmiddle\" alt=\"Reviewable\"/>](https://reviewable.io/reviews/toktok/website/83)\n<!-- Reviewable:end -->\n",
    "changed_files": 2,
    "closed_at": "2018-08-19T20:50:59Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/TokTok/website/pull/83#discussion_r163693939"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/TokTok/website/pulls/83"
                },
                "self": {
                    "href": "https://api.github.com/repos/TokTok/website/pulls/comments/163693939"
                }
            },
            "author_association": "MEMBER",
            "body": "\"This proposal makes toxcore itself deterministic in tests\"",
            "commit_id": "95faac70af688a481b0963388be69b2787311738",
            "created_at": "2018-01-24T22:07:57Z",
            "diff_hunk": "@@ -0,0 +1,156 @@\n+---\n+title: Mocking the Operating System\n+permalink: designs/osmock.html\n+authors: iphydf\n+first_proposed: 2018-01-22\n+last_revision: 2018-01-22\n+state: DRAFT\n+---\n+\n+Creating a mock/fake implementation of the operating system functions to run\n+simulations and repeat recorded execution traces in toxcore.\n+\n+# Objective\n+\n+This design proposes to create a layer below toxcore containing mock versions\n+of all system calls used by toxcore. Doing this gives us two advantages:\n+\n+1.  The operating system specific code is factored out, and none of the\n+    implementation files `#include`s system headers other than libc and\n+    library dependencies (opus, vpx).\n+2.  None of the toxcore code performs any system calls directly, without going\n+    through this layer.\n+\n+The first advantage allows us to test the OS-specific code independently from\n+the portable code. Once we validated that the I/O code does I/O the right way,\n+we can assume correctness and no longer need to test it through toxcore as\n+thoroughly as before. We'll still want integration tests that test toxcore's\n+integration with this layer, but most functional tests can become pure non-I/O\n+tests. This will give an immense speedup of tests, improving developer\n+velocity.\n+\n+The second point allows us to record exactly what system calls toxcore makes,\n+together with the system's responses, in an execution trace. We can then later\n+replay this trace to reproduce bugs. We can also use stored execution traces\n+to ensure that toxcore behaves the same for the same input.\n+\n+Not only can we reproduce the exact same code execution, but we can also\n+modify it slightly. This allows us to simulate arbitrary error conditions.\n+Perhaps most interestingly, since `malloc` is potentially a system call, we\n+will include it in the mock layer, allowing us to repeatedly execute the same\n+trace, each time with an increasing number of successful mallocs. This allows\n+us to test a large number of possible allocation failure handling paths, much\n+more precisely than we would by just setting process resource limits.\n+\n+# Requirements\n+\n+Requirements for the solution:\n+\n+*   It should include *all* potential system calls, including libsodium/nacl\n+    random functions such as key generation.\n+*   It should not add more than 50ns of latency to actual system calls when\n+    not recording or replaying a trace. The `gettimeofday` system call on\n+    Linux takes about 50ns, so we take that as a benchmark.\n+*   Recording a trace should be sufficiently low overhead such that we can\n+    record the trace of a multimedia (A/V) call without noticable delay.\n+*   It should be able to record toxcore API calls, so that we can replay the\n+    activity of any API user without having to manually reproduce the API\n+    calls that led to the execution.\n+*   The remainder of the code, i.e. everything except the OS layer, should no\n+    longer contain any platform-specific code. This includes LAN discovery\n+    code.\n+\n+Specifically the LAN discovery code contains larger platform-specific\n+functions that will need to move into the platform module.\n+\n+This proposal makes toxcore itself deterministic. The crypto library we use is",
            "html_url": "https://github.com/TokTok/website/pull/83#discussion_r163693939",
            "id": 163693939,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzY5MzkzOQ==",
            "original_commit_id": "abf37f812afab8a9ae9b1505e970bf6a0cb0f56b",
            "original_line": 66,
            "original_position": 66,
            "original_start_line": null,
            "path": "toktok/designs/osmock.md",
            "position": null,
            "pull_request_review_id": 91348866,
            "pull_request_url": "https://api.github.com/repos/TokTok/website/pulls/83",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/website/pulls/comments/163693939/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2018-08-19T20:47:29Z",
            "url": "https://api.github.com/repos/TokTok/website/pulls/comments/163693939",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8304462?v=4",
                "events_url": "https://api.github.com/users/robinlinden/events{/privacy}",
                "followers_url": "https://api.github.com/users/robinlinden/followers",
                "following_url": "https://api.github.com/users/robinlinden/following{/other_user}",
                "gists_url": "https://api.github.com/users/robinlinden/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robinlinden",
                "id": 8304462,
                "login": "robinlinden",
                "node_id": "MDQ6VXNlcjgzMDQ0NjI=",
                "organizations_url": "https://api.github.com/users/robinlinden/orgs",
                "received_events_url": "https://api.github.com/users/robinlinden/received_events",
                "repos_url": "https://api.github.com/users/robinlinden/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robinlinden/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robinlinden/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robinlinden",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/TokTok/website/pull/83#discussion_r163802775"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/TokTok/website/pulls/83"
                },
                "self": {
                    "href": "https://api.github.com/repos/TokTok/website/pulls/comments/163802775"
                }
            },
            "author_association": "MEMBER",
            "body": "Done.",
            "commit_id": "95faac70af688a481b0963388be69b2787311738",
            "created_at": "2018-01-25T10:27:48Z",
            "diff_hunk": "@@ -0,0 +1,156 @@\n+---\n+title: Mocking the Operating System\n+permalink: designs/osmock.html\n+authors: iphydf\n+first_proposed: 2018-01-22\n+last_revision: 2018-01-22\n+state: DRAFT\n+---\n+\n+Creating a mock/fake implementation of the operating system functions to run\n+simulations and repeat recorded execution traces in toxcore.\n+\n+# Objective\n+\n+This design proposes to create a layer below toxcore containing mock versions\n+of all system calls used by toxcore. Doing this gives us two advantages:\n+\n+1.  The operating system specific code is factored out, and none of the\n+    implementation files `#include`s system headers other than libc and\n+    library dependencies (opus, vpx).\n+2.  None of the toxcore code performs any system calls directly, without going\n+    through this layer.\n+\n+The first advantage allows us to test the OS-specific code independently from\n+the portable code. Once we validated that the I/O code does I/O the right way,\n+we can assume correctness and no longer need to test it through toxcore as\n+thoroughly as before. We'll still want integration tests that test toxcore's\n+integration with this layer, but most functional tests can become pure non-I/O\n+tests. This will give an immense speedup of tests, improving developer\n+velocity.\n+\n+The second point allows us to record exactly what system calls toxcore makes,\n+together with the system's responses, in an execution trace. We can then later\n+replay this trace to reproduce bugs. We can also use stored execution traces\n+to ensure that toxcore behaves the same for the same input.\n+\n+Not only can we reproduce the exact same code execution, but we can also\n+modify it slightly. This allows us to simulate arbitrary error conditions.\n+Perhaps most interestingly, since `malloc` is potentially a system call, we\n+will include it in the mock layer, allowing us to repeatedly execute the same\n+trace, each time with an increasing number of successful mallocs. This allows\n+us to test a large number of possible allocation failure handling paths, much\n+more precisely than we would by just setting process resource limits.\n+\n+# Requirements\n+\n+Requirements for the solution:\n+\n+*   It should include *all* potential system calls, including libsodium/nacl\n+    random functions such as key generation.\n+*   It should not add more than 50ns of latency to actual system calls when\n+    not recording or replaying a trace. The `gettimeofday` system call on\n+    Linux takes about 50ns, so we take that as a benchmark.\n+*   Recording a trace should be sufficiently low overhead such that we can\n+    record the trace of a multimedia (A/V) call without noticable delay.\n+*   It should be able to record toxcore API calls, so that we can replay the\n+    activity of any API user without having to manually reproduce the API\n+    calls that led to the execution.\n+*   The remainder of the code, i.e. everything except the OS layer, should no\n+    longer contain any platform-specific code. This includes LAN discovery\n+    code.\n+\n+Specifically the LAN discovery code contains larger platform-specific\n+functions that will need to move into the platform module.\n+\n+This proposal makes toxcore itself deterministic. The crypto library we use is",
            "html_url": "https://github.com/TokTok/website/pull/83#discussion_r163802775",
            "id": 163802775,
            "in_reply_to_id": 163693939,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MzgwMjc3NQ==",
            "original_commit_id": "abf37f812afab8a9ae9b1505e970bf6a0cb0f56b",
            "original_line": 66,
            "original_position": 66,
            "original_start_line": null,
            "path": "toktok/designs/osmock.md",
            "position": null,
            "pull_request_review_id": 91473331,
            "pull_request_url": "https://api.github.com/repos/TokTok/website/pulls/83",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/website/pulls/comments/163802775/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2018-08-19T20:47:29Z",
            "url": "https://api.github.com/repos/TokTok/website/pulls/comments/163802775",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "@JFreegman, @nurupo, @robinlinden please review this design doc.",
            "created_at": "2018-03-10T18:49:52Z",
            "html_url": "https://github.com/TokTok/website/pull/83#issuecomment-372054826",
            "id": 372054826,
            "issue_url": "https://api.github.com/repos/TokTok/website/issues/83",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjA1NDgyNg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/website/issues/comments/372054826/reactions"
            },
            "updated_at": "2018-03-10T18:49:52Z",
            "url": "https://api.github.com/repos/TokTok/website/issues/comments/372054826",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "\n\n\n\nReviewed 2 of 2 files at r2.\nReview status: all files reviewed at latest revision, 4 unresolved discussions.\n\n---\n\n*[toktok/designs/osmock.md, line 35 at r2](https://reviewable.io:443/reviews/toktok/website/83#-L7IAWtHJ3ncJo2o9Krg:-L7IAWtHJ3ncJo2o9Krh:b9drznx) ([raw file](https://github.com/toktok/website/blob/8d96afd774b570686b63f2fa045983865fe9e0ec/toktok/designs/osmock.md#L35)):*\n> ```Markdown\n> together with the system's responses, in an execution trace. We can then later\n> replay this trace to reproduce bugs. We can also use stored execution traces\n> to ensure that toxcore behaves the same for the same input.\n> ```\n\nWhat information would the mocker/tracer record?\n\nAs far as I understood, it would record just:\n\n - Which mocked system call function was called\n - Which arguments it was called with\n - At what time it was called\n - What was the system call function's return value/errno\n\ne.g.\n\n```\n00:00:01 malloc ( 16 ) = 0xf7f27000\n00:00:05 malloc ( 16 ) = 0xf7f0a000\n```\n\npretty much a strace-like output.\n\nThis is not enough information replay toxcore execution, you don't even know which toxcore functions called those mallocs, or which toxcore functions called those toxcore functions that have called the mallocs, etc.\n\nIf there is more tracing information being recorded than this then it would be less confusing if you mentioned it, unless I missed it and you can point me to it.\n\n---\n\n*[toktok/designs/osmock.md, line 58 at r2](https://reviewable.io:443/reviews/toktok/website/83#-L7IA8eoBB6LuUiuC0o4:-L7IA8eoBB6LuUiuC0o5:b-ghhqir) ([raw file](https://github.com/toktok/website/blob/8d96afd774b570686b63f2fa045983865fe9e0ec/toktok/designs/osmock.md#L58)):*\n> ```Markdown\n> *   It should be able to record toxcore API calls, so that we can replay the\n>     activity of any API user without having to manually reproduce the API\n>     calls that led to the execution.\n> ```\n\nThis point looks a bit out of place in a system call mocking proposal. So far you have talked about mocking system calls by providing an IO interface called `Env`, which would provide implementations for such system calls as memory allocation, time, network stack, probably also sleep, etc., but now you seem to be talking about providing Tox API mocking/tracing, so that you would know which toxcore API functions, with which arguments and at what time a client calls. You are no longer talking about system call mocking, which is what the title of this proposal. Perhaps change the title a little and elaborate more on how the API tracing would be done?\n\n---\n\n*[toktok/designs/osmock.md, line 137 at r2](https://reviewable.io:443/reviews/toktok/website/83#-L7ID6O5SW0g_yLg7-IC:-L7ID6O5SW0g_yLg7-ID:ba359be) ([raw file](https://github.com/toktok/website/blob/8d96afd774b570686b63f2fa045983865fe9e0ec/toktok/designs/osmock.md#L137)):*\n> ```Markdown\n> doesn't need to mock malloc and random number generators, but injects\n> hstox-generated network messages into the receive queue of the system under\n> test (i.e. toxcore). Using QuickCheck, we can explore properties of the entire\n> ```\n\nI don't understand how would that work. hstox would inject network messages into toxcore's simulated network queue? But all it can use to do this injection is the toxcore's system call mock, no? I don't think you have provided enough information for me to understand how is that going to work.\n\n---\n\n\n*Comments from [Reviewable](https://reviewable.io:443/reviews/toktok/website/83)*\n<!-- Sent from Reviewable.io -->\n",
            "created_at": "2018-03-11T04:14:31Z",
            "html_url": "https://github.com/TokTok/website/pull/83#issuecomment-372088079",
            "id": 372088079,
            "issue_url": "https://api.github.com/repos/TokTok/website/issues/83",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjA4ODA3OQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/TokTok/website/issues/comments/372088079/reactions"
            },
            "updated_at": "2018-03-11T04:14:31Z",
            "url": "https://api.github.com/repos/TokTok/website/issues/comments/372088079",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1855294?v=4",
                "events_url": "https://api.github.com/users/nurupo/events{/privacy}",
                "followers_url": "https://api.github.com/users/nurupo/followers",
                "following_url": "https://api.github.com/users/nurupo/following{/other_user}",
                "gists_url": "https://api.github.com/users/nurupo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/nurupo",
                "id": 1855294,
                "login": "nurupo",
                "node_id": "MDQ6VXNlcjE4NTUyOTQ=",
                "organizations_url": "https://api.github.com/users/nurupo/orgs",
                "received_events_url": "https://api.github.com/users/nurupo/received_events",
                "repos_url": "https://api.github.com/users/nurupo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/nurupo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/nurupo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/nurupo",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/TokTok/website/issues/83/comments",
    "commit_data": [
        {
            "author": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            },
            "comments_url": "https://api.github.com/repos/TokTok/website/commits/95faac70af688a481b0963388be69b2787311738/comments",
            "commit": {
                "author": {
                    "date": "2018-01-23T01:04:45Z",
                    "email": "iphydf@users.noreply.github.com",
                    "name": "iphydf"
                },
                "comment_count": 0,
                "committer": {
                    "date": "2018-08-19T20:47:27Z",
                    "email": "iphydf@users.noreply.github.com",
                    "name": "iphydf"
                },
                "message": "Add design proposal for system call mocking.",
                "tree": {
                    "sha": "add26a64b0141ba16a85abb9b2c60d1983c5beb9",
                    "url": "https://api.github.com/repos/TokTok/website/git/trees/add26a64b0141ba16a85abb9b2c60d1983c5beb9"
                },
                "url": "https://api.github.com/repos/TokTok/website/git/commits/95faac70af688a481b0963388be69b2787311738",
                "verification": {
                    "payload": "tree add26a64b0141ba16a85abb9b2c60d1983c5beb9\nparent 7b93c804a7ec90921782df678c8d9637c3589d15\nauthor iphydf <iphydf@users.noreply.github.com> 1516669485 +0000\ncommitter iphydf <iphydf@users.noreply.github.com> 1534711647 +0000\n\nAdd design proposal for system call mocking.\n",
                    "reason": "valid",
                    "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEEqQ4tlxH906HdaIgsOFXbotdEA8kFAlt5118ACgkQOFXbotdE\nA8kUvwf+Lz/JPzzxC/sQK2FJz2PG3G98bXDQZpufc7gxok/HN4a1qXK7hziC1iml\nzjITmIvr5UP5YJKUVFIyTjlLVhJCPy/9YX6JOkah60+lYP9/H5l6m5lH2Pqy5++0\naZgJl3oR9MFSnaUNp7pYY4XPYb9pVmdd+Y414fmWq3JghcE8VnM4kSepY5L4yk6B\nMN5rIMJLRVFhkFI51rsMna0+/b/VNYSGwo+stb3PkEg7ZtTQFYHjARaWnclmksN0\nSYcIN3e7GxsLafsbF5f8vvv/ls6Q5bdQdfQdJSleseu2KAZsYZ4w9CCeyjCfoSFj\nZAGX0p8aTNP5NwCiiHVowSf7G8MrHQ==\n=t1ia\n-----END PGP SIGNATURE-----",
                    "verified": true,
                    "verified_at": "2024-11-12T14:40:59Z"
                }
            },
            "committer": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            },
            "html_url": "https://github.com/TokTok/website/commit/95faac70af688a481b0963388be69b2787311738",
            "node_id": "MDY6Q29tbWl0NzgzMDY0MTg6OTVmYWFjNzBhZjY4OGE0ODFiMDk2MzM4OGJlNjliMjc4NzMxMTczOA==",
            "parents": [
                {
                    "html_url": "https://github.com/TokTok/website/commit/7b93c804a7ec90921782df678c8d9637c3589d15",
                    "sha": "7b93c804a7ec90921782df678c8d9637c3589d15",
                    "url": "https://api.github.com/repos/TokTok/website/commits/7b93c804a7ec90921782df678c8d9637c3589d15"
                }
            ],
            "sha": "95faac70af688a481b0963388be69b2787311738",
            "url": "https://api.github.com/repos/TokTok/website/commits/95faac70af688a481b0963388be69b2787311738"
        }
    ],
    "commits": 1,
    "commits_url": "https://api.github.com/repos/TokTok/website/pulls/83/commits",
    "created_at": "2018-01-23T01:05:41Z",
    "deletions": 4,
    "diff_url": "https://github.com/TokTok/website/pull/83.diff",
    "draft": false,
    "head": {
        "label": "iphydf:osmock",
        "ref": "osmock",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/iphydf/website/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/iphydf/website/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/iphydf/website/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/iphydf/website/branches{/branch}",
            "clone_url": "https://github.com/iphydf/website.git",
            "collaborators_url": "https://api.github.com/repos/iphydf/website/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/iphydf/website/comments{/number}",
            "commits_url": "https://api.github.com/repos/iphydf/website/commits{/sha}",
            "compare_url": "https://api.github.com/repos/iphydf/website/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/iphydf/website/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/iphydf/website/contributors",
            "created_at": "2017-01-07T22:08:32Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/iphydf/website/deployments",
            "description": "The TokTok website",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/iphydf/website/downloads",
            "events_url": "https://api.github.com/repos/iphydf/website/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/iphydf/website/forks",
            "full_name": "iphydf/website",
            "git_commits_url": "https://api.github.com/repos/iphydf/website/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/iphydf/website/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/iphydf/website/git/tags{/sha}",
            "git_url": "git://github.com/iphydf/website.git",
            "has_discussions": false,
            "has_downloads": false,
            "has_issues": true,
            "has_pages": false,
            "has_projects": false,
            "has_wiki": false,
            "homepage": "https://toktok.ltd/",
            "hooks_url": "https://api.github.com/repos/iphydf/website/hooks",
            "html_url": "https://github.com/iphydf/website",
            "id": 78306418,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/iphydf/website/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/iphydf/website/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/iphydf/website/issues{/number}",
            "keys_url": "https://api.github.com/repos/iphydf/website/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/iphydf/website/labels{/name}",
            "language": "CSS",
            "languages_url": "https://api.github.com/repos/iphydf/website/languages",
            "license": {
                "key": "gpl-3.0",
                "name": "GNU General Public License v3.0",
                "node_id": "MDc6TGljZW5zZTk=",
                "spdx_id": "GPL-3.0",
                "url": "https://api.github.com/licenses/gpl-3.0"
            },
            "merges_url": "https://api.github.com/repos/iphydf/website/merges",
            "milestones_url": "https://api.github.com/repos/iphydf/website/milestones{/number}",
            "mirror_url": null,
            "name": "website",
            "node_id": "MDEwOlJlcG9zaXRvcnk3ODMwNjQxOA==",
            "notifications_url": "https://api.github.com/repos/iphydf/website/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
                "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
                "followers_url": "https://api.github.com/users/iphydf/followers",
                "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
                "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iphydf",
                "id": 10647936,
                "login": "iphydf",
                "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
                "organizations_url": "https://api.github.com/users/iphydf/orgs",
                "received_events_url": "https://api.github.com/users/iphydf/received_events",
                "repos_url": "https://api.github.com/users/iphydf/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iphydf",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/iphydf/website/pulls{/number}",
            "pushed_at": "2024-11-07T02:02:19Z",
            "releases_url": "https://api.github.com/repos/iphydf/website/releases{/id}",
            "size": 19291,
            "ssh_url": "git@github.com:iphydf/website.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/iphydf/website/stargazers",
            "statuses_url": "https://api.github.com/repos/iphydf/website/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/iphydf/website/subscribers",
            "subscription_url": "https://api.github.com/repos/iphydf/website/subscription",
            "svn_url": "https://github.com/iphydf/website",
            "tags_url": "https://api.github.com/repos/iphydf/website/tags",
            "teams_url": "https://api.github.com/repos/iphydf/website/teams",
            "topics": [
                "toktok",
                "tox"
            ],
            "trees_url": "https://api.github.com/repos/iphydf/website/git/trees{/sha}",
            "updated_at": "2024-11-07T02:02:20Z",
            "url": "https://api.github.com/repos/iphydf/website",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "95faac70af688a481b0963388be69b2787311738",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
            "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
            "followers_url": "https://api.github.com/users/iphydf/followers",
            "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
            "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/iphydf",
            "id": 10647936,
            "login": "iphydf",
            "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
            "organizations_url": "https://api.github.com/users/iphydf/orgs",
            "received_events_url": "https://api.github.com/users/iphydf/received_events",
            "repos_url": "https://api.github.com/users/iphydf/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/iphydf",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/TokTok/website/pull/83",
    "id": 164458042,
    "issue_url": "https://api.github.com/repos/TokTok/website/issues/83",
    "labels": [],
    "locked": false,
    "maintainer_can_modify": false,
    "merge_commit_sha": "95faac70af688a481b0963388be69b2787311738",
    "mergeable": null,
    "mergeable_state": "unknown",
    "merged": true,
    "merged_at": "2018-08-19T20:50:59Z",
    "merged_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
        "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
        "followers_url": "https://api.github.com/users/iphydf/followers",
        "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
        "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/iphydf",
        "id": 10647936,
        "login": "iphydf",
        "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
        "organizations_url": "https://api.github.com/users/iphydf/orgs",
        "received_events_url": "https://api.github.com/users/iphydf/received_events",
        "repos_url": "https://api.github.com/users/iphydf/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/iphydf",
        "user_view_type": "public"
    },
    "milestone": null,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTY0NDU4MDQy",
    "number": 83,
    "patch_url": "https://github.com/TokTok/website/pull/83.patch",
    "rebaseable": null,
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/TokTok/website/pulls/comments{/number}",
    "review_comments": 2,
    "review_comments_url": "https://api.github.com/repos/TokTok/website/pulls/83/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/TokTok/website/statuses/95faac70af688a481b0963388be69b2787311738",
    "title": "Design proposal: system call mocking in c-toxcore.",
    "updated_at": "2018-08-19T20:51:03Z",
    "url": "https://api.github.com/repos/TokTok/website/pulls/83",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/10647936?v=4",
        "events_url": "https://api.github.com/users/iphydf/events{/privacy}",
        "followers_url": "https://api.github.com/users/iphydf/followers",
        "following_url": "https://api.github.com/users/iphydf/following{/other_user}",
        "gists_url": "https://api.github.com/users/iphydf/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/iphydf",
        "id": 10647936,
        "login": "iphydf",
        "node_id": "MDQ6VXNlcjEwNjQ3OTM2",
        "organizations_url": "https://api.github.com/users/iphydf/orgs",
        "received_events_url": "https://api.github.com/users/iphydf/received_events",
        "repos_url": "https://api.github.com/users/iphydf/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/iphydf/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/iphydf/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/iphydf",
        "user_view_type": "public"
    }
}